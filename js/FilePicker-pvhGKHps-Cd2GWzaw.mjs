/*! third party licenses: js/vendor.LICENSE.txt */
import{V as Z,d as D,r as w,e as v,j as Pe,b as j,m as $e,w as _e,l as Ve,n as Me}from"./vue.runtime.esm--3IrasGI.mjs";import{n as P,G as we,t as De,aL as He,a as K,g as Oe,N as J,aM as z,C as x,z as Q,p as ce,e as Ee,aN as ue}from"./NcNoteCard-e7-Bxio8-zJMuhIkb.mjs";import{d as Te,c as Re,e as de,f as pe,g as We,h as E,i as je,C as fe,j as Ze,k as qe}from"./index-CpZar-nV.mjs";import{c as Ue,N as Ge,B as Ke,l as Je,D as Qe,g as Xe,E as Ye,k as et,b as tt,r as it,F as nt}from"./NcTextArea-XCi8a16Y-WmkAQITw.mjs";import{s as at,u as rt,e as lt,l as st}from"./modulepreload-polyfill-p_2RZoQr.mjs";import{c as ke,_ as X,U as ot}from"./index-D1ImgWAx.mjs";import{l as Ce}from"./index-Ubm2itxG.mjs";import"./index-vg7q3Iku.mjs";import"./emoji-picker-I9E7i3AY.mjs";import"./index-1N813rwO.mjs";import"./index-JZEmfDus.mjs";const ct={name:"CheckboxBlankOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ut=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon checkbox-blank-outline-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},dt=[],pt=P(ct,ut,dt,!1,null,null,null,null);const ft=pt.exports,ht={name:"MinusBoxIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var mt=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon minus-box-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M17,13H7V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},gt=[],vt=P(ht,mt,gt,!1,null,null,null,null);const yt=vt.exports,bt={name:"CheckboxMarkedIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var _t=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon checkbox-marked-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},wt=[],kt=P(bt,_t,wt,!1,null,null,null,null);const Ct=kt.exports,xt={name:"RadioboxMarkedIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var St=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon radiobox-marked-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Bt=[],Nt=P(xt,St,Bt,!1,null,null,null,null);const Lt=Nt.exports,Ft={name:"RadioboxBlankIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var zt=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon radiobox-blank-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},At=[],It=P(Ft,zt,At,!1,null,null,null,null);const Pt=It.exports,$t={name:"ToggleSwitchOffIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Vt=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon toggle-switch-off-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M17,7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7M7,15A3,3 0 0,1 4,12A3,3 0 0,1 7,9A3,3 0 0,1 10,12A3,3 0 0,1 7,15Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Mt=[],Dt=P($t,Vt,Mt,!1,null,null,null,null);const Ht=Dt.exports,Ot={name:"ToggleSwitchIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Et=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon toggle-switch-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M17,7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7M17,15A3,3 0 0,1 14,12A3,3 0 0,1 17,9A3,3 0 0,1 20,12A3,3 0 0,1 17,15Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Tt=[],Rt=P(Ot,Et,Tt,!1,null,null,null,null);const Wt=Rt.exports,H="checkbox",O="radio",V="switch",T="button",jt={name:"NcCheckboxContent",components:{NcLoadingIcon:Ue},props:{id:{type:String,default:null},iconClass:{type:[String,Object],default:null},textClass:{type:[String,Object],default:null},type:{type:String,default:"checkbox",validator:e=>[H,O,V,T].includes(e)},buttonVariant:{type:Boolean,default:!1},isChecked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:Number,default:24}},computed:{isButtonType(){return this.type===T},checkboxRadioIconElement(){return this.type===O?this.isChecked?Lt:Pt:this.type===V?this.isChecked?Wt:Ht:this.indeterminate?yt:this.isChecked?Ct:ft}}};var Zt=function(){var e=this,t=e._self._c;return t("span",{staticClass:"checkbox-content",class:{["checkbox-content-"+e.type]:!0,"checkbox-content--button-variant":e.buttonVariant,"checkbox-content--has-text":!!e.$slots.default},attrs:{id:e.isButtonType?void 0:"".concat(e.id,"-label")}},[t("span",{class:{"checkbox-content__icon":!0,"checkbox-content__icon--checked":e.isChecked,[e.iconClass]:!0},attrs:{"aria-hidden":!0,inert:""}},[e._t("icon",function(){return[e.loading?t("NcLoadingIcon"):e.buttonVariant?e._e():t(e.checkboxRadioIconElement,{tag:"component",attrs:{size:e.size}})]},{checked:e.isChecked,loading:e.loading})],2),e.$slots.default?t("span",{class:["checkbox-content__text",e.textClass]},[e._t("default")],2):e._e()])},qt=[],Ut=P(jt,Zt,qt,!1,null,"adf98230",null,null);const Gt=Ut.exports,Kt={name:"NcCheckboxRadioSwitch",components:{NcCheckboxContent:Gt},inheritAttrs:!1,props:{id:{type:String,default:()=>"checkbox-radio-switch-"+we(),validator:e=>e.trim()!==""},wrapperId:{type:String,default:null},name:{type:String,default:null},ariaLabel:{type:String,default:""},type:{type:String,default:"checkbox",validator:e=>[H,O,V,T].includes(e)},buttonVariant:{type:Boolean,default:!1},buttonVariantGrouped:{type:String,default:"no",validator:e=>["no","vertical","horizontal"].includes(e)},checked:{type:[Boolean,Array,String],default:!1},value:{type:String,default:null},disabled:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},required:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},wrapperElement:{type:String,default:null}},emits:["update:checked"],computed:{isButtonType(){return this.type===T},computedWrapperElement(){return this.isButtonType?"button":this.wrapperElement!==null?this.wrapperElement:"span"},listeners(){return this.isButtonType?{click:this.onToggle}:{change:this.onToggle}},size(){return this.type===V?36:24},cssVars(){return{"--icon-size":this.size+"px","--icon-height":(this.type===V?16:this.size)+"px"}},inputType(){return[H,O,T].includes(this.type)?this.type:H},isChecked(){return this.value!==null?Array.isArray(this.checked)?[...this.checked].indexOf(this.value)>-1:this.checked===this.value:this.checked===!0},hasIndeterminate(){return[H,O].includes(this.inputType)}},mounted(){if(this.name&&this.type===H&&!Array.isArray(this.checked))throw new Error("When using groups of checkboxes, the updated value will be an array.");if(this.name&&this.type===V)throw new Error("Switches are not made to be used for data sets. Please use checkboxes instead.");if(typeof this.checked!="boolean"&&this.type===V)throw new Error("Switches can only be used with boolean as checked prop.")},methods:{t:De,n:He,onToggle(){if(this.disabled)return;if(this.type===O){this.$emit("update:checked",this.value);return}if(this.type===V){this.$emit("update:checked",!this.isChecked);return}if(typeof this.checked=="boolean"){this.$emit("update:checked",!this.checked);return}const e=this.getInputsSet().filter(t=>t.checked).map(t=>t.value);e.includes(this.value)?this.$emit("update:checked",e.filter(t=>t!==this.value)):this.$emit("update:checked",[...e,this.value])},getInputsSet(){return[...document.getElementsByName(this.name)]}}};var Jt=function(){var e=this,t=e._self._c;return t(e.computedWrapperElement,e._g(e._b({tag:"component",staticClass:"checkbox-radio-switch",class:{["checkbox-radio-switch-"+e.type]:e.type,"checkbox-radio-switch--checked":e.isChecked,"checkbox-radio-switch--disabled":e.disabled,"checkbox-radio-switch--indeterminate":e.hasIndeterminate?e.indeterminate:!1,"checkbox-radio-switch--button-variant":e.buttonVariant,"checkbox-radio-switch--button-variant-v-grouped":e.buttonVariant&&e.buttonVariantGrouped==="vertical","checkbox-radio-switch--button-variant-h-grouped":e.buttonVariant&&e.buttonVariantGrouped==="horizontal","button-vue":e.isButtonType},style:e.cssVars,attrs:{id:e.wrapperId,"aria-label":e.isButtonType&&e.ariaLabel?e.ariaLabel:void 0,type:e.isButtonType?"button":null}},"component",e.isButtonType?e.$attrs:{},!1),e.isButtonType?e.listeners:null),[e.isButtonType?e._e():t("input",e._g(e._b({staticClass:"checkbox-radio-switch__input",attrs:{id:e.id,"aria-labelledby":!e.isButtonType&&!e.ariaLabel?"".concat(e.id,"-label"):null,"aria-label":e.ariaLabel||void 0,disabled:e.disabled,type:e.inputType,required:e.required,name:e.name},domProps:{value:e.value,checked:e.isChecked,indeterminate:e.hasIndeterminate?e.indeterminate:null}},"input",e.$attrs,!1),e.listeners)),t("NcCheckboxContent",{staticClass:"checkbox-radio-switch__content",attrs:{id:e.id,"icon-class":"checkbox-radio-switch__icon","text-class":"checkbox-radio-switch__text",type:e.type,indeterminate:e.hasIndeterminate?e.indeterminate:!1,"button-variant":e.buttonVariant,"is-checked":e.isChecked,loading:e.loading,size:e.size},nativeOn:{click:function(i){return e.onToggle.apply(null,arguments)}},scopedSlots:e._u([{key:"icon",fn:function(){return[e._t("icon")]},proxy:!0}],null,!0)},[e._t("default")],2)],1)},Qt=[],Xt=P(Kt,Jt,Qt,!1,null,"6d6e6a47",null,null);const xe=Xt.exports,Yt={name:"NcBreadcrumb",components:{NcActions:K,ChevronRight:Oe,NcButton:J},inheritAttrs:!1,props:{name:{type:String,required:!0},title:{type:String,default:null},to:{type:[String,Object],default:void 0},exact:{type:Boolean,default:!1},href:{type:String,default:void 0},icon:{type:String,default:""},forceIconText:{type:Boolean,default:!1},disableDrop:{type:Boolean,default:!1},forceMenu:{type:Boolean,default:!1},open:{type:Boolean,default:!1}},emits:["update:open","dropped"],data(){return{hovering:!1,crumbId:"crumb-id-".concat(we())}},computed:{linkAttributes(){return this.to?{to:this.to,exact:this.exact,...this.$attrs}:this.href?{href:this.href,...this.$attrs}:this.$attrs}},methods:{onOpenChange(e){this.$emit("update:open",e)},dropped(e){return this.disableDrop||(this.$emit("dropped",e,this.to||this.href),this.$parent.$emit("dropped",e,this.to||this.href),this.hovering=!1),!1},dragEnter(e){this.disableDrop||(this.hovering=!0)},dragLeave(e){this.disableDrop||e.target.contains(e.relatedTarget)||this.$refs.crumb.contains(e.relatedTarget)||(this.hovering=!1)}}};var ei=function(){var e=this,t=e._self._c;return t("li",e._b({ref:"crumb",staticClass:"vue-crumb",class:{"vue-crumb--hovered":e.hovering},attrs:{draggable:"false"},on:{dragstart:function(i){return i.preventDefault(),(()=>{}).apply(null,arguments)},drop:function(i){return i.preventDefault(),e.dropped.apply(null,arguments)},dragover:function(i){return i.preventDefault(),(()=>{}).apply(null,arguments)},dragenter:e.dragEnter,dragleave:e.dragLeave}},"li",e._d({},[e.crumbId,""])),[(e.name||e.icon||e.$slots.icon)&&!e.$slots.default?t("NcButton",e._g(e._b({attrs:{title:e.title,"aria-label":e.icon?e.name:void 0,type:"tertiary"},scopedSlots:e._u([e.$slots.icon||e.icon?{key:"icon",fn:function(){return[e._t("icon",function(){return[t("span",{staticClass:"icon",class:e.icon})]})]},proxy:!0}:null,!(e.$slots.icon||e.icon)||e.forceIconText?{key:"default",fn:function(){return[e._v(" "+e._s(e.name)+" ")]},proxy:!0}:null],null,!0)},"NcButton",e.linkAttributes,!1),e.$listeners)):e._e(),e.$slots.default?t("NcActions",{ref:"actions",attrs:{type:"tertiary","force-menu":e.forceMenu,open:e.open,"menu-name":e.name,title:e.title,"force-name":!0,container:".vue-crumb[".concat(e.crumbId,"]")},on:{"update:open":e.onOpenChange},scopedSlots:e._u([{key:"icon",fn:function(){return[e._t("menu-icon")]},proxy:!0}],null,!0)},[e._t("default")],2):e._e(),t("ChevronRight",{staticClass:"vue-crumb__separator",attrs:{size:20}})],1)},ti=[],ii=P(Yt,ei,ti,!1,null,"fe4740ac",null,null);const Se=ii.exports;var U=Symbol(),R=Symbol(),he=Symbol(),me=Symbol(),Y=function(e){return"frag"in e},ni={get:function(){return this[R]||this.parentElement},configurable:!0},W=function(e,t){R in e||(e[R]=t,Object.defineProperty(e,"parentNode",ni))},ai={get:function(){var e=this.parentNode.childNodes,t=e.indexOf(this);return t>-1&&e[t+1]||null}},q=function(e){he in e||(e[he]=!0,Object.defineProperty(e,"nextSibling",ai))},ri=function(e,t){for(;e.parentNode!==t;){var i=e,n=i.parentNode;n&&(e=n)}return e},G,Be=function(e){if(!G){var t=Object.getOwnPropertyDescriptor(Node.prototype,"childNodes");G=t.get}var i=G.apply(e),n=Array.from(i).map(function(a){return ri(a,e)});return n.filter(function(a,r){return a!==n[r-1]})},li={get:function(){return this.frag||Be(this)}},si={get:function(){return this.childNodes[0]||null}};function oi(){return this.childNodes.length>0}var ge=function(e){me in e||(e[me]=!0,Object.defineProperties(e,{childNodes:li,firstChild:si}),e.hasChildNodes=oi)};function ci(){var e;(e=this.frag[0]).before.apply(e,arguments)}function ui(){var e=this.frag,t=e.splice(0,e.length);t.forEach(function(i){i.remove()})}var di=function e(t){var i;return(i=Array.prototype).concat.apply(i,t.map(function(n){return Y(n)?e(n.frag):n}))},pi=function(e,t){var i=e[U];t.before(i),W(i,e),e.frag.unshift(i)};function ve(e){if(Y(this)){var t=this.frag.indexOf(e);if(t>-1){var i=this.frag.splice(t,1),n=i[0];this.frag.length===0&&pi(this,n),e.remove()}}else{var a=Be(this),r=a.indexOf(e);r>-1&&e.remove()}return e}function ye(e,t){var i=this,n=e.frag||[e];if(Y(this)){if(e[R]===this&&e.parentElement)return e;var a=this.frag;if(t){var r=a.indexOf(t);r>-1&&(a.splice.apply(a,[r,0].concat(n)),t.before.apply(t,n))}else{var l=a[a.length-1];a.push.apply(a,n),l.after.apply(l,n)}Ne(this)}else t?this.childNodes.includes(t)&&t.before.apply(t,n):this.append.apply(this,n);n.forEach(function(d){W(d,i)});var s=n[n.length-1];return q(s),e}function fi(e){if(e[R]===this&&e.parentElement)return e;var t=this.frag,i=t[t.length-1];return i.after(e),W(e,this),Ne(this),t.push(e),e}var Ne=function(e){var t=e[U];e.frag[0]===t&&(e.frag.shift(),t.remove())},hi={set:function(e){var t=this;if(this.frag[0]!==this[U]&&this.frag.slice().forEach(function(n){return t.removeChild(n)}),e){var i=document.createElement("div");i.innerHTML=e,Array.from(i.childNodes).forEach(function(n){t.appendChild(n)})}},get:function(){return""}},mi={inserted:function(e){var t=e.parentNode,i=e.nextSibling,n=e.previousSibling,a=Array.from(e.childNodes),r=document.createComment("");a.length===0&&a.push(r),e.frag=a,e[U]=r;var l=document.createDocumentFragment();l.append.apply(l,di(a)),e.replaceWith(l),a.forEach(function(s){W(s,e),q(s)}),ge(e),Object.assign(e,{remove:ui,appendChild:fi,insertBefore:ye,removeChild:ve,before:ci}),Object.defineProperty(e,"innerHTML",hi),t&&(Object.assign(t,{removeChild:ve,insertBefore:ye}),W(e,t),ge(t)),i&&q(e),n&&q(n)},unbind:function(e){e.remove()}},Le={name:"Fragment",directives:{frag:mi},render:function(e){return e("div",{directives:[{name:"frag"}]},this.$slots.default)}};const be=(e,t,i)=>{if(e!==void 0)for(let n=e.length-1;n>=0;n--){const a=e[n],r=!a.componentOptions&&a.tag&&t.indexOf(a.tag)===-1,l=!!a.componentOptions&&typeof a.componentOptions.tag=="string",s=l&&t.indexOf(a.componentOptions.tag)===-1;(r||!l||s)&&((r||s)&&Z.util.warn("".concat(r?a.tag:a.componentOptions.tag," is not allowed inside the ").concat(i.$options.name," component"),i),e.splice(n,1))}},gi={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var vi=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon folder-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},yi=[],bi=P(gi,vi,yi,!1,null,null,null,null);const _i=bi.exports,N="vue-crumb",wi={name:"NcBreadcrumbs",components:{NcActions:K,NcActionButton:Ge,NcActionRouter:Ke,NcActionLink:Je,NcBreadcrumb:Se,IconFolder:_i},props:{rootIcon:{type:String,default:"icon-home"},ariaLabel:{type:String,default:null}},emits:["dropped"],data(){return{hiddenIndices:[],menuBreadcrumbProps:{name:"",forceMenu:!0,disableDrop:!0,open:!1},breadcrumbsRefs:{}}},beforeMount(){be(this.$slots.default,["NcBreadcrumb"],this)},beforeUpdate(){be(this.$slots.default,["NcBreadcrumb"],this)},created(){window.addEventListener("resize",Qe(()=>{this.handleWindowResize()},100)),at("navigation-toggled",this.delayedResize)},mounted(){this.handleWindowResize()},updated(){this.delayedResize(),this.$nextTick(()=>{this.hideCrumbs()})},beforeDestroy(){window.removeEventListener("resize",this.handleWindowResize),rt("navigation-toggled",this.delayedResize)},methods:{closeActions(e){this.$refs.actionsBreadcrumb.$el.contains(e.relatedTarget)||(this.menuBreadcrumbProps.open=!1)},async delayedResize(){await this.$nextTick(),this.handleWindowResize()},handleWindowResize(){var e;if(!this.$refs.container)return;const t=Object.values(this.breadcrumbsRefs),i=t.length,n=[],a=this.$refs.container.offsetWidth;let r=this.getTotalWidth(t);this.$refs.breadcrumb__actions&&(r+=this.$refs.breadcrumb__actions.offsetWidth);let l=r-a;l+=l>0?64:0;let s=0;const d=Math.floor(i/2);for(;l>0&&s<i-2;){const c=d+(s%2?s+1:s)/2*Math.pow(-1,s+i%2);l-=this.getWidth((e=t[c])==null?void 0:e.elm,c===t.length-1),n.push(c),s++}this.arraysEqual(this.hiddenIndices,n.sort((c,u)=>c-u))||(this.hiddenIndices=n)},arraysEqual(e,t){if(e.length!==t.length)return!1;if(e===t)return!0;if(e===null||t===null)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0},getTotalWidth(e){return e.reduce((t,i,n)=>t+this.getWidth(i==null?void 0:i.elm,n===e.length-1),0)},getWidth(e,t){if(!(e!=null&&e.classList))return 0;const i=e.classList.contains("".concat(N,"--hidden"));e.style.minWidth="auto",t&&(e.style.maxWidth="210px"),e.classList.remove("".concat(N,"--hidden"));const n=e.offsetWidth;return i&&e.classList.add("".concat(N,"--hidden")),e.style.minWidth="",e.style.maxWidth="",n},preventDefault(e){return e.preventDefault&&e.preventDefault(),!1},dragStart(e){return this.preventDefault(e)},dropped(e,t,i){return i||this.$emit("dropped",e,t),this.menuBreadcrumbProps.open=!1,document.querySelectorAll(".".concat(N)).forEach(n=>{n.classList.remove("".concat(N,"--hovered"))}),this.preventDefault(e)},dragOver(e){return this.preventDefault(e)},dragEnter(e,t){if(!t&&e.target.closest){const i=e.target.closest(".".concat(N));i.classList&&i.classList.contains(N)&&(document.querySelectorAll(".".concat(N)).forEach(n=>{n.classList.remove("".concat(N,"--hovered"))}),i.classList.add("".concat(N,"--hovered")))}},dragLeave(e,t){if(!t&&!e.target.contains(e.relatedTarget)&&e.target.closest){const i=e.target.closest(".".concat(N));if(i.contains(e.relatedTarget))return;i.classList&&i.classList.contains(N)&&i.classList.remove("".concat(N,"--hovered"))}},hideCrumbs(){Object.values(this.breadcrumbsRefs).forEach((e,t)=>{var i;(i=e==null?void 0:e.elm)!=null&&i.classList&&(this.hiddenIndices.includes(t)?e.elm.classList.add("".concat(N,"--hidden")):e.elm.classList.remove("".concat(N,"--hidden")))})},isBreadcrumb(e){var t;return(((t=e==null?void 0:e.componentOptions)==null?void 0:t.tag)||(e==null?void 0:e.tag)||"").includes("NcBreadcrumb")}},render(e){const t=[];if(this.$slots.default.forEach(r=>{var l,s;if(this.isBreadcrumb(r)){t.push(r);return}(r==null?void 0:r.type)===Le&&((s=(l=r==null?void 0:r.children)==null?void 0:l.forEach)==null||s.call(l,d=>{this.isBreadcrumb(d)&&t.push(d)}))}),t.length===0)return;Z.set(t[0].componentOptions.propsData,"icon",this.rootIcon),Z.set(t[0].componentOptions.propsData,"ref","breadcrumbs");const i={};t.forEach((r,l)=>{Z.set(r,"ref","crumb-".concat(l)),i[l]=r});let n=[];if(!this.hiddenIndices.length)n=t;else{n=t.slice(0,Math.round(t.length/2)),n.push(e("NcBreadcrumb",{class:"dropdown",props:this.menuBreadcrumbProps,attrs:{"aria-hidden":!0},ref:"actionsBreadcrumb",key:"actions-breadcrumb-1",nativeOn:{dragstart:this.dragStart,dragenter:()=>{this.menuBreadcrumbProps.open=!0},dragleave:this.closeActions},on:{"update:open":l=>{this.menuBreadcrumbProps.open=l}}},this.hiddenIndices.filter(l=>l<=t.length-1).map(l=>{const s=t[l],d=s.componentOptions.propsData.to,c=s.componentOptions.propsData.href,u=s.componentOptions.propsData.disableDrop,h=s.componentOptions.propsData.title,S=s.componentOptions.propsData.name;let y="NcActionButton",f="";c&&(y="NcActionLink",f=c),d&&(y="NcActionRouter",f=d);const b=e("IconFolder",{props:{size:20},slot:"icon"});return e(y,{class:N,props:{href:c||null,title:h,to:d||null},attrs:{draggable:!1},on:{...s.componentOptions.listeners},nativeOn:{dragstart:this.dragStart,drop:m=>this.dropped(m,f,u),dragover:this.dragOver,dragenter:m=>this.dragEnter(m,u),dragleave:m=>this.dragLeave(m,u)}},[b,S])})));const r=t.slice(Math.round(t.length/2));n=n.concat(r)}const a=[e("nav",{attrs:{"aria-label":this.ariaLabel}},[e("ul",{class:"breadcrumb__crumbs"},[n])])];return this.$slots.actions&&a.push(e("div",{class:"breadcrumb__actions",ref:"breadcrumb__actions"},this.$slots.actions)),this.breadcrumbsRefs=i,e("div",{class:["breadcrumb",{"breadcrumb--collapsed":this.hiddenIndices.length===t.length-2}],ref:"container"},a)}},ki=null,Ci=null;var xi=P(wi,ki,Ci,!1,null,"959b70c1",null,null);const Si=xi.exports;function Bi(){return document.documentElement.dataset.locale||"en"}function Ni(){return Bi().replace(/_/g,"-")}var Li="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",Fi="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",zi="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z";const Ai={name:"FileIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Ii=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon file-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Pi=[],$i=z(Ai,Ii,Pi,!1,null,null,null,null);const Fe=$i.exports,ee=()=>{const e=()=>{var i;return((i=document.getElementById("isPublic"))==null?void 0:i.value)==="1"},t=w(!0);return $e(()=>{t.value=e()}),{isPublic:t}},ze=()=>{var r,l,s;const e=Ce("files","config",null),t=w((r=e==null?void 0:e.show_hidden)!=null?r:!0),i=w((l=e==null?void 0:e.sort_favorites_first)!=null?l:!0),n=w((s=e==null?void 0:e.crop_image_previews)!=null?s:!0),{isPublic:a}=ee();return j(async()=>{var d,c,u,h,S,y;if(a.value)console.debug("Skip loading files settings - currently on public share");else try{const{data:f}=await ke.get(X("/apps/files/api/v1/configs"));t.value=(c=(d=f==null?void 0:f.data)==null?void 0:d.show_hidden)!=null?c:!1,i.value=(h=(u=f==null?void 0:f.data)==null?void 0:u.sort_favorites_first)!=null?h:!0,n.value=(y=(S=f==null?void 0:f.data)==null?void 0:S.crop_image_previews)!=null?y:!0}catch(f){console.error("Could not load files settings",f),Q(x("Could not load files settings"))}}),{showHiddenFiles:t,sortFavoritesFirst:i,cropImagePreviews:n}},Vi=e=>{var u,h,S,y,f,b,m,L,A,B,p,F;const t=_=>_==="asc"?"ascending":_==="desc"?"descending":"none",i=Ce("files","viewConfigs",null),n=w({sortBy:(h=(u=i==null?void 0:i.files)==null?void 0:u.sorting_mode)!=null?h:"basename",order:t((y=(S=i==null?void 0:i.files)==null?void 0:S.sorting_direction)!=null?y:"asc")}),a=w({sortBy:(b=(f=i==null?void 0:i.recent)==null?void 0:f.sorting_mode)!=null?b:"basename",order:t((L=(m=i==null?void 0:i.recent)==null?void 0:m.sorting_direction)!=null?L:"asc")}),r=w({sortBy:(B=(A=i==null?void 0:i.favorites)==null?void 0:A.sorting_mode)!=null?B:"basename",order:t((F=(p=i==null?void 0:i.favorites)==null?void 0:p.sorting_direction)!=null?F:"asc")}),{isPublic:l}=ee();j(async()=>{var _,k,o,g,I,$,M,te,ie,ne,ae,re,le,se,oe;if(l.value)console.debug("Skip loading files views - currently on public share");else try{const{data:C}=await ke.get(X("/apps/files/api/v1/views"));n.value={sortBy:(o=(k=(_=C==null?void 0:C.data)==null?void 0:_.files)==null?void 0:k.sorting_mode)!=null?o:"basename",order:t((I=(g=C==null?void 0:C.data)==null?void 0:g.files)==null?void 0:I.sorting_direction)},r.value={sortBy:(te=(M=($=C==null?void 0:C.data)==null?void 0:$.favorites)==null?void 0:M.sorting_mode)!=null?te:"basename",order:t((ne=(ie=C==null?void 0:C.data)==null?void 0:ie.favorites)==null?void 0:ne.sorting_direction)},a.value={sortBy:(le=(re=(ae=C==null?void 0:C.data)==null?void 0:ae.recent)==null?void 0:re.sorting_mode)!=null?le:"basename",order:t((oe=(se=C==null?void 0:C.data)==null?void 0:se.recent)==null?void 0:oe.sorting_direction)}}catch(C){console.error("Could not load files views",C),Q(x("Could not load files views"))}});const s=v(()=>ue(e||"files")==="files"?n.value:ue(e)==="recent"?a.value:r.value),d=v(()=>s.value.sortBy),c=v(()=>s.value.order);return{filesViewConfig:n,favoritesViewConfig:r,recentViewConfig:a,currentConfig:s,sortBy:d,order:c}},Mi={name:"MenuUpIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Di=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon menu-up-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M7,15L12,10L17,15H7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Hi=[],Oi=z(Mi,Di,Hi,!1,null,null,null,null);const Ei=Oi.exports,Ti={name:"MenuDownIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Ri=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon menu-down-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M7,10L12,15L17,10H7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Wi=[],ji=z(Ti,Ri,Wi,!1,null,null,null,null);const Zi=ji.exports,Ae={"file-picker__file-icon":"_file-picker__file-icon_1vgv4_5"},qi=D({__name:"LoadingTableRow",props:{showCheckbox:{type:Boolean}},setup(e){return{__sfc:!0,fileListIconStyles:Ae}}});var Ui=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("tr",{staticClass:"file-picker__row loading-row",attrs:{"aria-hidden":"true"}},[e.showCheckbox?t("td",{staticClass:"row-checkbox"},[t("span")]):e._e(),t("td",{staticClass:"row-name"},[t("div",{staticClass:"row-wrapper"},[t("span",{class:i.fileListIconStyles["file-picker__file-icon"]}),t("span")])]),e._m(0),e._m(1)])},Gi=[function(){var e=this,t=e._self._c;return e._self._setupProxy,t("td",{staticClass:"row-size"},[t("span")])},function(){var e=this,t=e._self._c;return e._self._setupProxy,t("td",{staticClass:"row-modified"},[t("span")])}],Ki=z(qi,Ui,Gi,!1,null,"6aded0d9",null,null);const Ji=Ki.exports;function Qi(e,t={}){var i;t={size:32,cropPreview:!1,mimeFallback:!0,...t};try{const n=((i=e.attributes)==null?void 0:i.previewUrl)||X("/core/preview?fileId={fileid}",{fileid:e.fileid});let a;try{a=new URL(n)}catch{a=new URL(n,window.location.origin)}return a.searchParams.set("x","".concat(t.size)),a.searchParams.set("y","".concat(t.size)),a.searchParams.set("mimeFallback","".concat(t.mimeFallback)),a.searchParams.set("a",t.cropPreview===!0?"0":"1"),a.searchParams.set("c","".concat(e.attributes.etag)),a}catch{return null}}const Xi={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Yi=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon folder-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},en=[],tn=z(Xi,Yi,en,!1,null,null,null,null);const Ie=tn.exports,nn={name:"FilePreview"},an=D({...nn,props:{node:null,cropImagePreviews:{type:Boolean}},setup(e){const t=e,i=w(Ae),n=v(()=>Qi(t.node,{cropPreview:t.cropImagePreviews})),a=v(()=>t.node.type===E.File),r=w(!1);return _e(n,()=>{if(r.value=!1,n.value){const l=document.createElement("img");l.src=n.value.href,l.onerror=()=>l.remove(),l.onload=()=>{r.value=!0,l.remove()},document.body.appendChild(l)}},{immediate:!0}),{__sfc:!0,fileListIconStyles:i,props:t,previewURL:n,isFile:a,canLoadPreview:r,IconFile:Fe,IconFolder:Ie}}});var rn=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("div",{class:i.fileListIconStyles["file-picker__file-icon"],style:i.canLoadPreview?{backgroundImage:"url(".concat(i.previewURL,")")}:void 0},[i.canLoadPreview?e._e():[i.isFile?t(i.IconFile,{attrs:{size:20}}):t(i.IconFolder,{attrs:{size:20}})]],2)},ln=[],sn=z(an,rn,ln,!1,null,null,null,null);const on=sn.exports,cn=D({__name:"FileListRow",props:{allowPickDirectory:{type:Boolean},selected:{type:Boolean},showCheckbox:{type:Boolean},canPick:{type:Boolean},node:null,cropImagePreviews:{type:Boolean}},emits:["update:selected","enter-directory"],setup(e,{emit:t}){const i=e,n=v(()=>{var u;return((u=i.node.attributes)==null?void 0:u.displayName)||i.node.basename.slice(0,i.node.extension?-i.node.extension.length:void 0)}),a=v(()=>i.node.extension),r=v(()=>i.node.type===E.Folder),l=v(()=>i.canPick&&(i.allowPickDirectory||!r.value));function s(){t("update:selected",!i.selected)}function d(){r.value?t("enter-directory",i.node):s()}function c(u){u.key==="Enter"&&d()}return{__sfc:!0,props:i,emit:t,displayName:n,fileExtension:a,isDirectory:r,isPickable:l,toggleSelected:s,handleClick:d,handleKeyDown:c,formatFileSize:qe,NcCheckboxRadioSwitch:xe,NcDateTime:nt,t:x,FilePreview:on}}});var un=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("tr",e._g({class:["file-picker__row",{"file-picker__row--selected":e.selected&&!e.showCheckbox}],attrs:{tabindex:e.showCheckbox&&!i.isDirectory?void 0:0,"aria-selected":i.isPickable?e.selected:void 0,"data-filename":e.node.basename,"data-testid":"file-list-row"}},{click:i.handleClick,...!e.showCheckbox||i.isDirectory?{keydown:i.handleKeyDown}:{}}),[e.showCheckbox?t("td",{staticClass:"row-checkbox",on:{click:function(n){return n.stopPropagation(),(()=>{}).apply(null,arguments)}}},[t(i.NcCheckboxRadioSwitch,{attrs:{"aria-label":i.t("Select the row for {nodename}",{nodename:i.displayName}),checked:e.selected,disabled:!i.isPickable,"data-testid":"row-checkbox"},on:{"update:checked":i.toggleSelected}})],1):e._e(),t("td",{staticClass:"row-name"},[t("div",{staticClass:"file-picker__name-container",attrs:{"data-testid":"row-name"}},[t(i.FilePreview,{attrs:{node:e.node,"crop-image-previews":e.cropImagePreviews}}),t("div",{staticClass:"file-picker__file-name",attrs:{title:i.displayName},domProps:{textContent:e._s(i.displayName)}}),t("div",{staticClass:"file-picker__file-extension",domProps:{textContent:e._s(i.fileExtension)}})],1)]),t("td",{staticClass:"row-size"},[e._v(" "+e._s(i.formatFileSize(e.node.size||0))+" ")]),t("td",{staticClass:"row-modified"},[t(i.NcDateTime,{attrs:{timestamp:e.node.mtime,"ignore-seconds":!0}})],1)])},dn=[],pn=z(cn,un,dn,!1,null,"48df4f27",null,null);const fn=pn.exports,hn=D({__name:"FileList",props:{currentView:null,multiselect:{type:Boolean},allowPickDirectory:{type:Boolean},loading:{type:Boolean},files:null,selectedFiles:null,path:null},emits:["update:path","update:selectedFiles"],setup(e,{emit:t}){const i=e,n=w(),{currentConfig:a}=Vi(i.currentView),r=v(()=>{var p;return(p=n.value)!=null?p:a.value}),l=v(()=>r.value.sortBy==="basename"?r.value.order==="none"?void 0:r.value.order:void 0),s=v(()=>r.value.sortBy==="size"?r.value.order==="none"?void 0:r.value.order:void 0),d=v(()=>r.value.sortBy==="mtime"?r.value.order==="none"?void 0:r.value.order:void 0),c=p=>{r.value.sortBy===p?r.value.order==="ascending"?n.value={sortBy:r.value.sortBy,order:"descending"}:n.value={sortBy:r.value.sortBy,order:"ascending"}:n.value={sortBy:p,order:"ascending"}},{sortFavoritesFirst:u,cropImagePreviews:h}=ze(),S=v(()=>{const p={ascending:(_,k,o)=>o(_,k),descending:(_,k,o)=>o(k,_),none:(_,k,o)=>0},F={basename:(_,k)=>{var o,g;return(((o=_.attributes)==null?void 0:o.displayName)||_.basename).localeCompare(((g=k.attributes)==null?void 0:g.displayName)||k.basename,Ni())},size:(_,k)=>(_.size||0)-(k.size||0),mtime:(_,k)=>{var o,g,I,$;return(((g=(o=k.mtime)==null?void 0:o.getTime)==null?void 0:g.call(o))||0)-((($=(I=_.mtime)==null?void 0:I.getTime)==null?void 0:$.call(I))||0)}};return[...i.files].sort((_,k)=>(k.type===E.Folder?1:0)-(_.type===E.Folder?1:0)||(u?(k.attributes.favorite?1:0)-(_.attributes.favorite?1:0):0)||p[r.value.order](_,k,F[r.value.sortBy]))}),y=v(()=>i.files.filter(p=>i.allowPickDirectory||p.type!==E.Folder)),f=v(()=>!i.loading&&i.selectedFiles.length>0&&i.selectedFiles.length>=y.value.length);function b(){i.selectedFiles.length<y.value.length?t("update:selectedFiles",y.value):t("update:selectedFiles",[])}function m(p){i.selectedFiles.includes(p)?t("update:selectedFiles",i.selectedFiles.filter(F=>F.path!==p.path)):i.multiselect?t("update:selectedFiles",[...i.selectedFiles,p]):t("update:selectedFiles",[p])}function L(p){t("update:path",p.path)}const A=w(4),B=w();{const p=()=>Me(()=>{var k,o,g,I,$;const F=((o=(k=B.value)==null?void 0:k.parentElement)==null?void 0:o.children)||[];let _=((I=(g=B.value)==null?void 0:g.parentElement)==null?void 0:I.clientHeight)||450;for(let M=0;M<F.length;M++)($=B.value)!=null&&$.isSameNode(F[M])||(_-=F[M].clientHeight);A.value=Math.floor((_-50)/50)});j(()=>{window.addEventListener("resize",p),p()}),Ve(()=>{window.removeEventListener("resize",p)})}return{__sfc:!0,props:i,emit:t,customSortingConfig:n,filesAppSorting:a,sortingConfig:r,sortByName:l,sortBySize:s,sortByModified:d,toggleSorting:c,sortFavoritesFirst:u,cropImagePreviews:h,sortedFiles:S,selectableFiles:y,allSelected:f,onSelectAll:b,onNodeSelected:m,onChangeDirectory:L,skeletonNumber:A,fileContainer:B,NcButton:J,NcCheckboxRadioSwitch:xe,t:x,IconSortAscending:Ei,IconSortDescending:Zi,LoadingTableRow:Ji,FileListRow:fn}}});var mn=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("div",{ref:"fileContainer",staticClass:"file-picker__files"},[t("table",[t("thead",[t("tr",[e.multiselect?t("th",{staticClass:"row-checkbox"},[t("span",{staticClass:"hidden-visually"},[e._v(" "+e._s(i.t("Select entry"))+" ")]),e.multiselect?t(i.NcCheckboxRadioSwitch,{attrs:{"aria-label":i.t("Select all entries"),checked:i.allSelected,"data-testid":"select-all-checkbox"},on:{"update:checked":i.onSelectAll}}):e._e()],1):e._e(),t("th",{staticClass:"row-name",attrs:{"aria-sort":i.sortByName}},[t("div",{staticClass:"header-wrapper"},[t("span",{staticClass:"file-picker__header-preview"}),t(i.NcButton,{attrs:{wide:!0,type:"tertiary","data-test":"file-picker_sort-name"},on:{click:function(n){return i.toggleSorting("basename")}},scopedSlots:e._u([{key:"icon",fn:function(){return[i.sortByName==="ascending"?t(i.IconSortAscending,{attrs:{size:20}}):i.sortByName==="descending"?t(i.IconSortDescending,{attrs:{size:20}}):t("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(i.t("Name"))+" ")])],1)]),t("th",{staticClass:"row-size",attrs:{"aria-sort":i.sortBySize}},[t(i.NcButton,{attrs:{wide:!0,type:"tertiary"},on:{click:function(n){return i.toggleSorting("size")}},scopedSlots:e._u([{key:"icon",fn:function(){return[i.sortBySize==="ascending"?t(i.IconSortAscending,{attrs:{size:20}}):i.sortBySize==="descending"?t(i.IconSortDescending,{attrs:{size:20}}):t("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(i.t("Size"))+" ")])],1),t("th",{staticClass:"row-modified",attrs:{"aria-sort":i.sortByModified}},[t(i.NcButton,{attrs:{wide:!0,type:"tertiary"},on:{click:function(n){return i.toggleSorting("mtime")}},scopedSlots:e._u([{key:"icon",fn:function(){return[i.sortByModified==="ascending"?t(i.IconSortAscending,{attrs:{size:20}}):i.sortByModified==="descending"?t(i.IconSortDescending,{attrs:{size:20}}):t("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(i.t("Modified"))+" ")])],1)])]),t("tbody",[e.loading?e._l(i.skeletonNumber,function(n){return t(i.LoadingTableRow,{key:n,attrs:{"show-checkbox":e.multiselect}})}):e._l(i.sortedFiles,function(n){return t(i.FileListRow,{key:n.fileid||n.path,attrs:{"allow-pick-directory":e.allowPickDirectory,"show-checkbox":e.multiselect,"can-pick":e.multiselect||e.selectedFiles.length===0||e.selectedFiles.includes(n),selected:e.selectedFiles.includes(n),node:n,"crop-image-previews":i.cropImagePreviews},on:{"update:selected":function(a){return i.onNodeSelected(n)},"enter-directory":i.onChangeDirectory}})})],2)])])},gn=[],vn=z(hn,mn,gn,!1,null,"d3c94818",null,null);const yn=vn.exports,bn={name:"HomeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var _n=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon home-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},wn=[],kn=z(bn,_n,wn,!1,null,null,null,null);const Cn=kn.exports,xn={name:"PlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Sn=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon plus-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Bn=[],Nn=z(xn,Sn,Bn,!1,null,null,null,null);const Ln=Nn.exports,Fn=D({__name:"FilePickerBreadcrumbs",props:{path:null,showMenu:{type:Boolean}},emits:["update:path","create-node"],setup(e,{emit:t}){const i=e,n=w(!1),a=w(""),r=w();function l(){var S,y,f,b;const c=a.value.trim(),u=(y=(S=r.value)==null?void 0:S.$el)==null?void 0:y.querySelector("input");let h="";return c.length===0?h=x("Folder name cannot be empty."):c.includes("/")?h=x('"/" is not allowed inside a folder name.'):["..","."].includes(c)?h=x('"{name}" is an invalid folder name.',{name:c}):(f=window.OC.config)!=null&&f.blacklist_files_regex&&c.match((b=window.OC.config)==null?void 0:b.blacklist_files_regex)&&(h=x('"{name}" is not an allowed folder name',{name:c})),u&&u.setCustomValidity(h),h===""}const s=function(){const c=a.value.trim();l()&&(n.value=!1,t("create-node",c),a.value="")},d=v(()=>i.path.split("/").filter(c=>c!=="").map((c,u,h)=>({name:c,path:"/"+h.slice(0,u+1).join("/")})));return{__sfc:!0,props:i,emit:t,actionsOpen:n,newNodeName:a,nameInput:r,validateInput:l,onSubmit:s,pathElements:d,IconFolder:Ie,IconHome:Cn,IconPlus:Ln,NcActions:K,NcActionInput:et,NcBreadcrumbs:Si,NcBreadcrumb:Se,t:x}}});var zn=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(i.NcBreadcrumbs,{staticClass:"file-picker__breadcrumbs",scopedSlots:e._u([{key:"default",fn:function(){return[t(i.NcBreadcrumb,{attrs:{name:i.t("All files"),title:i.t("Home")},on:{click:function(n){return i.emit("update:path","/")}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconHome,{attrs:{size:20}})]},proxy:!0}])}),e._l(i.pathElements,function(n){return t(i.NcBreadcrumb,{key:n.path,attrs:{name:n.name,title:n.path},on:{click:function(a){return i.emit("update:path",n.path)}}})})]},proxy:!0},e.showMenu?{key:"actions",fn:function(){return[t(i.NcActions,{attrs:{"aria-label":i.t("Create directory"),"force-menu":!0,"force-name":!0,"menu-name":i.t("New"),open:i.actionsOpen,type:"secondary"},on:{"update:open":function(n){i.actionsOpen=n},close:function(n){i.newNodeName=""}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconPlus,{attrs:{size:20}})]},proxy:!0}],null,!1,2971667417)},[t(i.NcActionInput,{ref:"nameInput",attrs:{value:i.newNodeName,label:i.t("New folder"),placeholder:i.t("New folder name")},on:{"update:value":function(n){i.newNodeName=n},submit:i.onSubmit,input:i.validateInput},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconFolder,{attrs:{size:20}})]},proxy:!0}],null,!1,1614167509)})],1)]},proxy:!0}:null],null,!0)})},An=[],In=z(Fn,zn,An,!1,null,"22cbb5df",null,null);const Pn=In.exports,$n={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Vn=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon close-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Mn=[],Dn=z($n,Vn,Mn,!1,null,null,null,null);const Hn=Dn.exports,On={name:"MagnifyIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var En=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon magnify-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Tn=[],Rn=z(On,En,Tn,!1,null,null,null,null);const Wn=Rn.exports,jn=e=>{const t=[{id:"files",label:x("All files"),icon:Fi},{id:"recent",label:x("Recent"),icon:Li},{id:"favorites",label:x("Favorites"),icon:zi}],i=e.value?t.filter(({id:n})=>n==="files"):t;return{allViews:t,availableViews:i}},Zn=D({__name:"FilePickerNavigation",props:{currentView:null,filterString:null,isCollapsed:{type:Boolean},disabledNavigation:{type:Boolean}},emits:["update:currentView","update:filterString"],setup(e,{emit:t}){const i=e,{availableViews:n}=jn(w(st()===null)),a=v(()=>{var r;return(r=n.filter(l=>l.id===i.currentView)[0])!=null?r:n[0]});return{__sfc:!0,props:i,emit:t,availableViews:n,currentViewObject:a,updateFilterValue:r=>t("update:filterString",r),IconClose:Hn,IconMagnify:Wn,NcButton:J,NcIconSvgWrapper:Ee,NcSelect:tt,NcTextField:it,Fragment:Le,t:x}}});var qn=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(i.Fragment,[t(i.NcTextField,{staticClass:"file-picker__filter-input",attrs:{value:e.filterString,label:i.t("Filter file list"),"show-trailing-button":!!e.filterString},on:{"update:value":i.updateFilterValue,"trailing-button-click":function(n){return i.updateFilterValue("")}},scopedSlots:e._u([{key:"trailing-button-icon",fn:function(){return[t(i.IconClose,{attrs:{size:16}})]},proxy:!0}])},[t(i.IconMagnify,{attrs:{size:16}})],1),i.availableViews.length>1&&!e.disabledNavigation?[e.isCollapsed?t(i.NcSelect,{attrs:{"aria-label":i.t("Current view selector"),clearable:!1,searchable:!1,options:i.availableViews,value:i.currentViewObject},on:{input:n=>i.emit("update:currentView",n.id)}}):t("ul",{staticClass:"file-picker__side"},e._l(i.availableViews,function(n){return t("li",{key:n.id},[t(i.NcButton,{attrs:{type:e.currentView===n.id?"primary":"tertiary",wide:!0},on:{click:function(a){return e.$emit("update:currentView",n.id)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.NcIconSvgWrapper,{attrs:{path:n.icon,size:20}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(n.label)+" ")])],1)}),0)]:e._e()],2)},Un=[],Gn=z(Zn,qn,Un,!1,null,"a06474d4",null,null);const Kn=Gn.exports,Jn=function(e,t,i){const n=v(()=>i.value?"/":Te),a=v(()=>i.value?ot("webdav").replace("/remote.php","/public.php"):Re),r=v(()=>{if(i.value){const b=document.getElementById("sharingToken").value,m=btoa("".concat(b,":null"));return de(a.value,{Authorization:"Basic ".concat(m)})}return de()}),l=b=>je(b,n.value,a.value),s=()=>{const b=new AbortController,m=Math.round(Date.now()/1e3)-60*60*24*14;return new fe(async(L,A,B)=>{B(()=>b.abort());try{const{data:p}=await r.value.search("/",{signal:b.signal,details:!0,data:Ze(m)}),F=p.results.map(l);L(F)}catch(p){A(p)}})},d=()=>{const b=new AbortController;return new fe(async(m,L,A)=>{A(()=>b.abort());try{let B=(await r.value.getDirectoryContents("".concat(n.value).concat(t.value),{signal:b.signal,details:!0,data:pe()})).data.map(l);i.value&&(B=B.filter(p=>p.path!==t.value)),m(B)}catch(B){L(B)}})},c=w([]),u=w(!0),h=w(null);async function S(b){const m=ce.join(t.value,b);await r.value.createDirectory(ce.join(n.value,m));const L=await y(m);return c.value.push(L),L}async function y(b,m=void 0){m=m!=null?m:n.value;const{data:L}=await r.value.stat("".concat(m).concat(b),{details:!0,data:pe()});return l(L)}async function f(){h.value&&h.value.cancel(),u.value=!0,e.value==="favorites"?h.value=We(r.value,t.value,n.value):e.value==="recent"?h.value=s():h.value=d(),c.value=await h.value,h.value=null,u.value=!1}return _e([e,t],()=>f()),j(()=>f()),{isLoading:u,files:c,loadFiles:f,getFile:y,createDirectory:S}},Qn=function(e){const t=v(()=>e.value.map(i=>i.split("/")));return{isSupportedMimeType:i=>{const n=i.split("/");return t.value.some(([a,r])=>(n[0]===a||a==="*")&&(n[1]===r||r==="*"))}}},Xn={name:"FilePicker"},Yn=D({...Xn,props:{buttons:null,name:null,allowPickDirectory:{type:Boolean,default:!1},disabledNavigation:{type:Boolean,default:!1},container:{default:"body"},filterFn:{default:void 0},mimetypeFilter:{default:()=>[]},multiselect:{type:Boolean,default:!0},path:{default:void 0}},emits:["close"],setup(e,{emit:t}){const i=e,{isPublic:n}=ee(),a=w(!0),r=v(()=>(typeof i.buttons=="function"?i.buttons(u.value,y.value,d.value):i.buttons).map(o=>({...o,callback:()=>{l=!0,s(o.callback)}})));let l=!1;const s=async o=>{const g=u.value.length===0&&i.allowPickDirectory?[await B(y.value)]:u.value;o(g),t("close",g),l=!1},d=w("files"),c=v(()=>d.value==="favorites"?x("Favorites"):d.value==="recent"?x("Recent"):""),u=w([]),h=w((window==null?void 0:window.sessionStorage.getItem("NC.FilePicker.LastPath"))||"/"),S=w(),y=v({get:()=>d.value==="files"?S.value||i.path||h.value:"/",set:o=>{i.path===void 0&&window.sessionStorage.setItem("NC.FilePicker.LastPath",o),S.value=o,u.value=[]}}),f=w(""),{isSupportedMimeType:b}=Qn(Pe(i,"mimetypeFilter")),{files:m,isLoading:L,loadFiles:A,getFile:B,createDirectory:p}=Jn(d,y,n);j(()=>A());const{showHiddenFiles:F}=ze(),_=v(()=>{let o=m.value;return F.value||(o=o.filter(g=>!g.basename.startsWith("."))),i.mimetypeFilter.length>0&&(o=o.filter(g=>g.type==="folder"||g.mime&&b(g.mime))),f.value&&(o=o.filter(g=>g.basename.toLowerCase().includes(f.value.toLowerCase()))),i.filterFn&&(o=o.filter(g=>i.filterFn(g))),o}),k=v(()=>d.value==="files"?x("Upload some content or sync with your devices!"):d.value==="recent"?x("Files and folders you recently modified will show up here."):x("Files and folders you mark as favorite will show up here."));return{__sfc:!0,props:i,emit:t,isPublic:n,isOpen:a,dialogButtons:r,isHandlingCallback:l,handleButtonClick:s,currentView:d,viewHeadline:c,selectedFiles:u,savedPath:h,navigatedPath:S,currentPath:y,filterString:f,isSupportedMimeType:b,files:m,isLoading:L,loadFiles:A,getFile:B,createDirectory:p,showHiddenFiles:F,filteredFiles:_,noFilesDescription:k,onCreateFolder:async o=>{try{const g=await p(o);y.value=g.path,lt("files:node:created",m.value.filter(I=>I.basename===o)[0])}catch(g){console.warn("Could not create new folder",{name:o,error:g}),Q(x("Could not create the new folder"))}},handleClose:o=>{!o&&!l&&t("close")},IconFile:Fe,FileList:yn,FilePickerBreadcrumbs:Pn,FilePickerNavigation:Kn,NcDialog:Xe,NcEmptyContent:Ye,t:x}}});var ea=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(i.NcDialog,{attrs:{container:e.container,buttons:i.dialogButtons,name:e.name,size:"large","content-classes":"file-picker__content","dialog-classes":"file-picker","navigation-classes":"file-picker__navigation",open:i.isOpen},on:{"update:open":[function(n){i.isOpen=n},i.handleClose]},scopedSlots:e._u([{key:"navigation",fn:function({isCollapsed:n}){return[t(i.FilePickerNavigation,{attrs:{"is-collapsed":n,"current-view":i.currentView,"filter-string":i.filterString,"disabled-navigation":e.disabledNavigation},on:{"update:currentView":function(a){i.currentView=a},"update:current-view":function(a){i.currentView=a},"update:filterString":function(a){i.filterString=a},"update:filter-string":function(a){i.filterString=a}}})]}}])},[t("div",{staticClass:"file-picker__main"},[i.currentView==="files"?t(i.FilePickerBreadcrumbs,{attrs:{path:i.currentPath,"show-menu":e.allowPickDirectory},on:{"update:path":function(n){i.currentPath=n},"create-node":i.onCreateFolder}}):t("div",{staticClass:"file-picker__view"},[t("h3",[e._v(e._s(i.viewHeadline))])]),i.isLoading||i.filteredFiles.length>0?t(i.FileList,{attrs:{"allow-pick-directory":e.allowPickDirectory,"current-view":i.currentView,files:i.filteredFiles,multiselect:e.multiselect,loading:i.isLoading,path:i.currentPath,"selected-files":i.selectedFiles,name:i.viewHeadline},on:{"update:path":[function(n){i.currentPath=n},function(n){i.currentView="files"}],"update:selectedFiles":function(n){i.selectedFiles=n},"update:selected-files":function(n){i.selectedFiles=n}}}):i.filterString?t(i.NcEmptyContent,{attrs:{name:i.t("No matching files"),description:i.t("No files matching your filter were found.")},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconFile)]},proxy:!0}])}):t(i.NcEmptyContent,{attrs:{name:i.t("No files in here"),description:i.noFilesDescription},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconFile)]},proxy:!0}])})],1)])},ta=[],ia=z(Yn,ea,ta,!1,null,"6ff1b36b",null,null);const ha=ia.exports;export{ha as default};
