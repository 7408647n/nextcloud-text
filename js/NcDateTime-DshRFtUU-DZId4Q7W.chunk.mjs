import{g as O}from"./emoji-picker-DwlFXcXb.chunk.mjs";import{c as T,r as _,u as b,w as M,o as z,e as D}from"./vue.runtime.esm-csNk-d35.chunk.mjs";import{r as F,i as q,f as x,n as L,a as $,g as A}from"./index-CXP1mBob.chunk.mjs";var I={exports:{}},E;function j(){return E||(E=1,function(a){var t=Object.prototype.hasOwnProperty,e="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(e=!1));function m(r,n,i){this.fn=r,this.context=n,this.once=i||!1}function u(r,n,i,f,c){if(typeof i!="function")throw new TypeError("The listener must be a function");var h=new m(i,f||r,c),d=e?e+n:n;return r._events[d]?r._events[d].fn?r._events[d]=[r._events[d],h]:r._events[d].push(h):(r._events[d]=h,r._eventsCount++),r}function v(r,n){--r._eventsCount===0?r._events=new o:delete r._events[n]}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var r=[],n,i;if(this._eventsCount===0)return r;for(i in n=this._events)t.call(n,i)&&r.push(e?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(n)):r},l.prototype.listeners=function(r){var n=e?e+r:r,i=this._events[n];if(!i)return[];if(i.fn)return[i.fn];for(var f=0,c=i.length,h=new Array(c);f<c;f++)h[f]=i[f].fn;return h},l.prototype.listenerCount=function(r){var n=e?e+r:r,i=this._events[n];return i?i.fn?1:i.length:0},l.prototype.emit=function(r,n,i,f,c,h){var d=e?e+r:r;if(!this._events[d])return!1;var s=this._events[d],y=arguments.length,w,p;if(s.fn){switch(s.once&&this.removeListener(r,s.fn,void 0,!0),y){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,n),!0;case 3:return s.fn.call(s.context,n,i),!0;case 4:return s.fn.call(s.context,n,i,f),!0;case 5:return s.fn.call(s.context,n,i,f,c),!0;case 6:return s.fn.call(s.context,n,i,f,c,h),!0}for(p=1,w=new Array(y-1);p<y;p++)w[p-1]=arguments[p];s.fn.apply(s.context,w)}else{var N=s.length,g;for(p=0;p<N;p++)switch(s[p].once&&this.removeListener(r,s[p].fn,void 0,!0),y){case 1:s[p].fn.call(s[p].context);break;case 2:s[p].fn.call(s[p].context,n);break;case 3:s[p].fn.call(s[p].context,n,i);break;case 4:s[p].fn.call(s[p].context,n,i,f);break;default:if(!w)for(g=1,w=new Array(y-1);g<y;g++)w[g-1]=arguments[g];s[p].fn.apply(s[p].context,w)}}return!0},l.prototype.on=function(r,n,i){return u(this,r,n,i,!1)},l.prototype.once=function(r,n,i){return u(this,r,n,i,!0)},l.prototype.removeListener=function(r,n,i,f){var c=e?e+r:r;if(!this._events[c])return this;if(!n)return v(this,c),this;var h=this._events[c];if(h.fn)h.fn===n&&(!f||h.once)&&(!i||h.context===i)&&v(this,c);else{for(var d=0,s=[],y=h.length;d<y;d++)(h[d].fn!==n||f&&!h[d].once||i&&h[d].context!==i)&&s.push(h[d]);s.length?this._events[c]=s.length===1?s[0]:s:v(this,c)}return this},l.prototype.removeAllListeners=function(r){var n;return r?(n=e?e+r:r,this._events[n]&&v(this,n)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,a.exports=l}(I)),I.exports}var k=j();const V=O(k);class S extends Error{constructor(t){super(t),this.name="TimeoutError"}}class Y extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const C=a=>globalThis.DOMException===void 0?new Y(a):new DOMException(a),P=a=>{const t=a.reason===void 0?C("This operation was aborted."):a.reason;return t instanceof Error?t:C(t)};function B(a,t){const{milliseconds:e,fallback:o,message:m,customTimers:u={setTimeout,clearTimeout}}=t;let v,l;const r=new Promise((n,i)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(t.signal){const{signal:c}=t;c.aborted&&i(P(c)),l=()=>{i(P(c))},c.addEventListener("abort",l,{once:!0})}if(e===Number.POSITIVE_INFINITY){a.then(n,i);return}const f=new S;v=u.setTimeout.call(void 0,()=>{if(o){try{n(o())}catch(c){i(c)}return}typeof a.cancel=="function"&&a.cancel(),m===!1?n():m instanceof Error?i(m):(f.message=m??`Promise timed out after ${e} milliseconds`,i(f))},e),(async()=>{try{n(await a)}catch(c){i(c)}})()}).finally(()=>{r.clear(),l&&t.signal&&t.signal.removeEventListener("abort",l)});return r.clear=()=>{u.clearTimeout.call(void 0,v),v=void 0},r}function R(a,t,e){let o=0,m=a.length;for(;m>0;){const u=Math.trunc(m/2);let v=o+u;e(a[v],t)<=0?(o=++v,m-=u+1):m=u}return o}class G{#t=[];enqueue(t,e){e={priority:0,...e};const o={priority:e.priority,id:e.id,run:t};if(this.size===0||this.#t[this.size-1].priority>=e.priority){this.#t.push(o);return}const m=R(this.#t,o,(u,v)=>v.priority-u.priority);this.#t.splice(m,0,o)}setPriority(t,e){const o=this.#t.findIndex(u=>u.id===t);if(o===-1)throw new ReferenceError(`No promise function with the id "${t}" exists in the queue.`);const[m]=this.#t.splice(o,1);this.enqueue(m.run,{priority:e,id:t})}dequeue(){return this.#t.shift()?.run}filter(t){return this.#t.filter(e=>e.priority===t.priority).map(e=>e.run)}get size(){return this.#t.length}}class et extends V{#t;#o;#s=0;#f;#a;#p=0;#r;#u;#e;#v;#n=0;#c;#i;#d;#g=1n;timeout;constructor(t){if(super(),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:G,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);this.#t=t.carryoverConcurrencyCount,this.#o=t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,this.#f=t.intervalCap,this.#a=t.interval,this.#e=new t.queueClass,this.#v=t.queueClass,this.concurrency=t.concurrency,this.timeout=t.timeout,this.#d=t.throwOnTimeout===!0,this.#i=t.autoStart===!1}get#T(){return this.#o||this.#s<this.#f}get#b(){return this.#n<this.#c}#x(){this.#n--,this.#h(),this.emit("next")}#_(){this.#w(),this.#y(),this.#u=void 0}get#I(){const t=Date.now();if(this.#r===void 0){const e=this.#p-t;if(e<0)this.#s=this.#t?this.#n:0;else return this.#u===void 0&&(this.#u=setTimeout(()=>{this.#_()},e)),!0}return!1}#h(){if(this.#e.size===0)return this.#r&&clearInterval(this.#r),this.#r=void 0,this.emit("empty"),this.#n===0&&this.emit("idle"),!1;if(!this.#i){const t=!this.#I;if(this.#T&&this.#b){const e=this.#e.dequeue();return e?(this.emit("active"),e(),t&&this.#y(),!0):!1}}return!1}#y(){this.#o||this.#r!==void 0||(this.#r=setInterval(()=>{this.#w()},this.#a),this.#p=Date.now()+this.#a)}#w(){this.#s===0&&this.#n===0&&this.#r&&(clearInterval(this.#r),this.#r=void 0),this.#s=this.#t?this.#n:0,this.#l()}#l(){for(;this.#h(););}get concurrency(){return this.#c}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#c=t,this.#l()}async#E(t){return new Promise((e,o)=>{t.addEventListener("abort",()=>{o(t.reason)},{once:!0})})}setPriority(t,e){this.#e.setPriority(t,e)}async add(t,e={}){return e.id??=(this.#g++).toString(),e={timeout:this.timeout,throwOnTimeout:this.#d,...e},new Promise((o,m)=>{this.#e.enqueue(async()=>{this.#n++,this.#s++;try{e.signal?.throwIfAborted();let u=t({signal:e.signal});e.timeout&&(u=B(Promise.resolve(u),{milliseconds:e.timeout})),e.signal&&(u=Promise.race([u,this.#E(e.signal)]));const v=await u;o(v),this.emit("completed",v)}catch(u){if(u instanceof S&&!e.throwOnTimeout){o();return}m(u),this.emit("error",u)}finally{this.#x()}},e),this.emit("add"),this.#h()})}async addAll(t,e){return Promise.all(t.map(async o=>this.add(o,e)))}start(){return this.#i?(this.#i=!1,this.#l(),this):this}pause(){this.#i=!0}clear(){this.#e=new this.#v}async onEmpty(){this.#e.size!==0&&await this.#m("empty")}async onSizeLessThan(t){this.#e.size<t||await this.#m("next",()=>this.#e.size<t)}async onIdle(){this.#n===0&&this.#e.size===0||await this.#m("idle")}async#m(t,e){return new Promise(o=>{const m=()=>{e&&!e()||(this.off(t,m),o())};this.on(t,m)})}get size(){return this.#e.size}sizeBy(t){return this.#e.filter(t).length}get pending(){return this.#n}get isPaused(){return this.#i}}F(q);const H={long:x("a few seconds ago"),short:x("seconds ago"),narrow:x("sec. ago")};function J(a=Date.now(),t={}){const e=_(Date.now());let o;const m=_({format:{timeStyle:"medium",dateStyle:"short"},relativeTime:"long",ignoreSeconds:!1,...b(t)}),u=T(()=>({...b(t),...m.value})),v=T(()=>new Date(b(a))),l=T(()=>new Intl.DateTimeFormat($(),u.value.format).format(v.value)),r=T(()=>{if(u.value.relativeTime!==!1){const n=new Intl.RelativeTimeFormat(A(),{numeric:"auto",style:u.value.relativeTime}),i=(v.value.getTime()-e.value)/1e3;if(Math.abs(i)<59.5)return u.value.ignoreSeconds?H[u.value.relativeTime]:n.format(Math.round(i),"second");const f=i/60;if(Math.abs(f)<=59)return n.format(Math.round(f),"minute");const c=f/60;if(Math.abs(c)<23.5)return n.format(Math.round(c),"hour");const h=c/24;if(Math.abs(h)<6.5)return n.format(Math.round(h),"day");if(Math.abs(h)<27.5){const s=h/7;return n.format(Math.round(s),"week")}const d=h/30;return Math.abs(d)<11.5?n.format(Math.round(d),"month"):n.format(Math.round(h/365),"year")}return l.value});return M([u],()=>{window.clearInterval(o),o=void 0,u.value.relativeTime&&(o=window.setInterval(()=>{e.value=Date.now()},1e3))}),z(()=>{u.value.relativeTime!==!1&&(o=window.setInterval(()=>{e.value=Date.now()},1e3))}),D(()=>{window.clearInterval(o)}),{formattedTime:r,formattedFullTime:l,options:m}}const K={name:"NcDateTime",props:{timestamp:{type:[Date,Number],required:!0},format:{type:Object,default:()=>({timeStyle:"medium",dateStyle:"short"})},relativeTime:{type:[Boolean,String],default:"long",validator:a=>a===!1||["long","short","narrow"].includes(a)},ignoreSeconds:{type:Boolean,default:!1}},setup(a){const t=T(()=>a.timestamp),{formattedTime:e,formattedFullTime:o}=J(t,a);return{formattedTime:e,formattedFullTime:o}}};var Q=function(){var a=this,t=a._self._c;return t("span",{staticClass:"nc-datetime",attrs:{"data-timestamp":a.timestamp,title:a.formattedFullTime},domProps:{textContent:a._s(a.formattedTime)}})},U=[],W=L(K,Q,U,!1,null,null);const rt=W.exports;export{rt as N,et as P};
//# sourceMappingURL=NcDateTime-DshRFtUU-DZId4Q7W.chunk.mjs.map
