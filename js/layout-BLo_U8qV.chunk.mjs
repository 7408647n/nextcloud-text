/*! third party licenses: js/vendor.LICENSE.txt */
import{G as y}from"./graph-CLaSQ2sW.chunk.mjs";import{b as Ce,p as ge,q as he,g as Q,e as re,m as V,o as Pe,s as Se,c as Ge,u as Oe,d as f,h as m,i as b,f as L,v as E,r as G}from"./_baseUniq-Bn3mFlP-.chunk.mjs";import{f as _,b as ve,a as Fe,c as Ve,d as qe,t as q,m as p,e as M,g as H,l as P,h as Be}from"./_basePickBy-CHide9PO.chunk.mjs";import{b2 as Ye,b3 as je,b4 as ze,aK as Ae,b5 as De,aO as le,aN as me,b6 as Je,aJ as D,ay as Ke,aQ as Qe,aA as He,b7 as J}from"./mermaid.core-BvYhV_Ep.chunk.mjs";function Ue(e){return Ye(je(e,void 0,_),e+"")}var We=1,Xe=4;function Ze(e){return Ce(e,We|Xe)}function $e(e,r){return e==null?e:ze(e,ge(r),Ae)}function er(e,r){return e&&he(e,ge(r))}function rr(e,r){return e>r}function O(e,r){var n={};return r=Q(r),he(e,function(t,o,i){De(n,o,r(t,o,i))}),n}function k(e){return e&&e.length?ve(e,le,rr):void 0}function U(e,r){return e&&e.length?ve(e,Q(r),Fe):void 0}function nr(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}function tr(e,r){if(e!==r){var n=e!==void 0,t=e===null,o=e===e,i=re(e),u=r!==void 0,a=r===null,d=r===r,c=re(r);if(!a&&!c&&!i&&e>r||i&&u&&d&&!a&&!c||t&&u&&d||!n&&d||!o)return 1;if(!t&&!i&&!c&&e<r||c&&n&&o&&!t&&!i||a&&n&&o||!u&&o||!d)return-1}return 0}function or(e,r,n){for(var t=-1,o=e.criteria,i=r.criteria,u=o.length,a=n.length;++t<u;){var d=tr(o[t],i[t]);if(d){if(t>=a)return d;var c=n[t];return d*(c=="desc"?-1:1)}}return e.index-r.index}function ir(e,r,n){r.length?r=V(r,function(i){return me(i)?function(u){return Pe(u,i.length===1?i[0]:i)}:i}):r=[le];var t=-1;r=V(r,Je(Q));var o=Ve(e,function(i,u,a){var d=V(r,function(c){return c(i)});return{criteria:d,index:++t,value:i}});return nr(o,function(i,u){return or(i,u,n)})}function ur(e,r){return qe(e,r,function(n,t){return Se(e,t)})}var S=Ue(function(e,r){return e==null?{}:ur(e,r)}),ar=Math.ceil,dr=Math.max;function cr(e,r,n,t){for(var o=-1,i=dr(ar((r-e)/(n||1)),0),u=Array(i);i--;)u[++o]=e,e+=n;return u}function fr(e){return function(r,n,t){return t&&typeof t!="number"&&D(r,n,t)&&(n=t=void 0),r=q(r),n===void 0?(n=r,r=0):n=q(n),t=t===void 0?r<n?1:-1:q(t),cr(r,n,t)}}var N=fr(),C=Ke(function(e,r){if(e==null)return[];var n=r.length;return n>1&&D(e,r[0],r[1])?r=[]:n>2&&D(r[0],r[1],r[2])&&(r=[r[0]]),ir(e,Ge(r),[])}),sr=0;function W(e){var r=++sr;return Oe(e)+r}function gr(e,r,n){for(var t=-1,o=e.length,i=r.length,u={};++t<o;){var a=t<i?r[t]:void 0;n(u,e[t],a)}return u}function hr(e,r){return gr(e||[],r||[],Qe)}class vr{constructor(){var r={};r._next=r._prev=r,this._sentinel=r}dequeue(){var r=this._sentinel,n=r._prev;if(n!==r)return ne(n),n}enqueue(r){var n=this._sentinel;r._prev&&r._next&&ne(r),r._next=n._next,n._next._prev=r,n._next=r,r._prev=n}toString(){for(var r=[],n=this._sentinel,t=n._prev;t!==n;)r.push(JSON.stringify(t,lr)),t=t._prev;return"["+r.join(", ")+"]"}}function ne(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function lr(e,r){if(e!=="_next"&&e!=="_prev")return r}var mr=He(1);function pr(e,r){if(e.nodeCount()<=1)return[];var n=br(e,r||mr),t=wr(n.graph,n.buckets,n.zeroIdx);return _(p(t,function(o){return e.outEdges(o.v,o.w)}))}function wr(e,r,n){for(var t=[],o=r[r.length-1],i=r[0],u;e.nodeCount();){for(;u=i.dequeue();)B(e,r,n,u);for(;u=o.dequeue();)B(e,r,n,u);if(e.nodeCount()){for(var a=r.length-2;a>0;--a)if(u=r[a].dequeue(),u){t=t.concat(B(e,r,n,u,!0));break}}}return t}function B(e,r,n,t,o){var i=o?[]:void 0;return f(e.inEdges(t.v),function(u){var a=e.edge(u),d=e.node(u.v);o&&i.push({v:u.v,w:u.w}),d.out-=a,K(r,n,d)}),f(e.outEdges(t.v),function(u){var a=e.edge(u),d=u.w,c=e.node(d);c.in-=a,K(r,n,c)}),e.removeNode(t.v),i}function br(e,r){var n=new y,t=0,o=0;f(e.nodes(),function(a){n.setNode(a,{v:a,in:0,out:0})}),f(e.edges(),function(a){var d=n.edge(a.v,a.w)||0,c=r(a),s=d+c;n.setEdge(a.v,a.w,s),o=Math.max(o,n.node(a.v).out+=c),t=Math.max(t,n.node(a.w).in+=c)});var i=N(o+t+3).map(function(){return new vr}),u=t+1;return f(n.nodes(),function(a){K(i,u,n.node(a))}),{graph:n,buckets:i,zeroIdx:u}}function K(e,r,n){n.out?n.in?e[n.out-n.in+r].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function yr(e){var r=e.graph().acyclicer==="greedy"?pr(e,n(e)):xr(e);f(r,function(t){var o=e.edge(t);e.removeEdge(t),o.forwardName=t.name,o.reversed=!0,e.setEdge(t.w,t.v,o,W("rev"))});function n(t){return function(o){return t.edge(o).weight}}}function xr(e){var r=[],n={},t={};function o(i){m(t,i)||(t[i]=!0,n[i]=!0,f(e.outEdges(i),function(u){m(n,u.w)?r.push(u):o(u.w)}),delete n[i])}return f(e.nodes(),o),r}function kr(e){f(e.edges(),function(r){var n=e.edge(r);if(n.reversed){e.removeEdge(r);var t=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(r.w,r.v,n,t)}})}function I(e,r,n,t){var o;do o=W(t);while(e.hasNode(o));return n.dummy=r,e.setNode(o,n),o}function Er(e){var r=new y().setGraph(e.graph());return f(e.nodes(),function(n){r.setNode(n,e.node(n))}),f(e.edges(),function(n){var t=r.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);r.setEdge(n.v,n.w,{weight:t.weight+o.weight,minlen:Math.max(t.minlen,o.minlen)})}),r}function pe(e){var r=new y({multigraph:e.isMultigraph()}).setGraph(e.graph());return f(e.nodes(),function(n){e.children(n).length||r.setNode(n,e.node(n))}),f(e.edges(),function(n){r.setEdge(n,e.edge(n))}),r}function te(e,r){var n=e.x,t=e.y,o=r.x-n,i=r.y-t,u=e.width/2,a=e.height/2;if(!o&&!i)throw new Error("Not possible to find intersection inside of the rectangle");var d,c;return Math.abs(i)*u>Math.abs(o)*a?(i<0&&(a=-a),d=a*o/i,c=a):(o<0&&(u=-u),d=u,c=u*i/o),{x:n+d,y:t+c}}function F(e){var r=p(N(we(e)+1),function(){return[]});return f(e.nodes(),function(n){var t=e.node(n),o=t.rank;b(o)||(r[o][t.order]=n)}),r}function Nr(e){var r=M(p(e.nodes(),function(n){return e.node(n).rank}));f(e.nodes(),function(n){var t=e.node(n);m(t,"rank")&&(t.rank-=r)})}function _r(e){var r=M(p(e.nodes(),function(i){return e.node(i).rank})),n=[];f(e.nodes(),function(i){var u=e.node(i).rank-r;n[u]||(n[u]=[]),n[u].push(i)});var t=0,o=e.graph().nodeRankFactor;f(n,function(i,u){b(i)&&u%o!==0?--t:t&&f(i,function(a){e.node(a).rank+=t})})}function oe(e,r,n,t){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=t),I(e,"border",o,r)}function we(e){return k(p(e.nodes(),function(r){var n=e.node(r).rank;if(!b(n))return n}))}function Ir(e,r){var n={lhs:[],rhs:[]};return f(e,function(t){r(t)?n.lhs.push(t):n.rhs.push(t)}),n}function Rr(e,r){return r()}function Mr(e){function r(n){var t=e.children(n),o=e.node(n);if(t.length&&f(t,r),m(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var i=o.minRank,u=o.maxRank+1;i<u;++i)ie(e,"borderLeft","_bl",n,o,i),ie(e,"borderRight","_br",n,o,i)}}f(e.children(),r)}function ie(e,r,n,t,o,i){var u={width:0,height:0,rank:i,borderType:r},a=o[r][i-1],d=I(e,"border",u,n);o[r][i]=d,e.setParent(d,t),a&&e.setEdge(a,d,{weight:1})}function Tr(e){var r=e.graph().rankdir.toLowerCase();(r==="lr"||r==="rl")&&be(e)}function Lr(e){var r=e.graph().rankdir.toLowerCase();(r==="bt"||r==="rl")&&Cr(e),(r==="lr"||r==="rl")&&(Pr(e),be(e))}function be(e){f(e.nodes(),function(r){ue(e.node(r))}),f(e.edges(),function(r){ue(e.edge(r))})}function ue(e){var r=e.width;e.width=e.height,e.height=r}function Cr(e){f(e.nodes(),function(r){Y(e.node(r))}),f(e.edges(),function(r){var n=e.edge(r);f(n.points,Y),m(n,"y")&&Y(n)})}function Y(e){e.y=-e.y}function Pr(e){f(e.nodes(),function(r){j(e.node(r))}),f(e.edges(),function(r){var n=e.edge(r);f(n.points,j),m(n,"x")&&j(n)})}function j(e){var r=e.x;e.x=e.y,e.y=r}function Sr(e){e.graph().dummyChains=[],f(e.edges(),function(r){Gr(e,r)})}function Gr(e,r){var n=r.v,t=e.node(n).rank,o=r.w,i=e.node(o).rank,u=r.name,a=e.edge(r),d=a.labelRank;if(i!==t+1){e.removeEdge(r);var c,s,g;for(g=0,++t;t<i;++g,++t)a.points=[],s={width:0,height:0,edgeLabel:a,edgeObj:r,rank:t},c=I(e,"edge",s,"_d"),t===d&&(s.width=a.width,s.height=a.height,s.dummy="edge-label",s.labelpos=a.labelpos),e.setEdge(n,c,{weight:a.weight},u),g===0&&e.graph().dummyChains.push(c),n=c;e.setEdge(n,o,{weight:a.weight},u)}}function Or(e){f(e.graph().dummyChains,function(r){var n=e.node(r),t=n.edgeLabel,o;for(e.setEdge(n.edgeObj,t);n.dummy;)o=e.successors(r)[0],e.removeNode(r),t.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(t.x=n.x,t.y=n.y,t.width=n.width,t.height=n.height),r=o,n=e.node(r)})}function X(e){var r={};function n(t){var o=e.node(t);if(m(r,t))return o.rank;r[t]=!0;var i=M(p(e.outEdges(t),function(u){return n(u.w)-e.edge(u).minlen}));return(i===Number.POSITIVE_INFINITY||i===void 0||i===null)&&(i=0),o.rank=i}f(e.sources(),n)}function T(e,r){return e.node(r.w).rank-e.node(r.v).rank-e.edge(r).minlen}function ye(e){var r=new y({directed:!1}),n=e.nodes()[0],t=e.nodeCount();r.setNode(n,{});for(var o,i;Fr(r,e)<t;)o=Vr(r,e),i=r.hasNode(o.v)?T(e,o):-T(e,o),qr(r,e,i);return r}function Fr(e,r){function n(t){f(r.nodeEdges(t),function(o){var i=o.v,u=t===i?o.w:i;!e.hasNode(u)&&!T(r,o)&&(e.setNode(u,{}),e.setEdge(t,u,{}),n(u))})}return f(e.nodes(),n),e.nodeCount()}function Vr(e,r){return U(r.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return T(r,n)})}function qr(e,r,n){f(e.nodes(),function(t){r.node(t).rank+=n})}function Br(){}Br.prototype=new Error;function xe(e,r,n){me(r)||(r=[r]);var t=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],i={};return f(r,function(u){if(!e.hasNode(u))throw new Error("Graph does not have node: "+u);ke(e,u,n==="post",i,t,o)}),o}function ke(e,r,n,t,o,i){m(t,r)||(t[r]=!0,n||i.push(r),f(o(r),function(u){ke(e,u,n,t,o,i)}),n&&i.push(r))}function Yr(e,r){return xe(e,r,"post")}function jr(e,r){return xe(e,r,"pre")}x.initLowLimValues=$,x.initCutValues=Z,x.calcCutValue=Ee,x.leaveEdge=_e,x.enterEdge=Ie,x.exchangeEdges=Re;function x(e){e=Er(e),X(e);var r=ye(e);$(r),Z(r,e);for(var n,t;n=_e(r);)t=Ie(r,e,n),Re(r,e,n,t)}function Z(e,r){var n=Yr(e,e.nodes());n=n.slice(0,n.length-1),f(n,function(t){zr(e,r,t)})}function zr(e,r,n){var t=e.node(n),o=t.parent;e.edge(n,o).cutvalue=Ee(e,r,n)}function Ee(e,r,n){var t=e.node(n),o=t.parent,i=!0,u=r.edge(n,o),a=0;return u||(i=!1,u=r.edge(o,n)),a=u.weight,f(r.nodeEdges(n),function(d){var c=d.v===n,s=c?d.w:d.v;if(s!==o){var g=c===i,h=r.edge(d).weight;if(a+=g?h:-h,Dr(e,n,s)){var v=e.edge(n,s).cutvalue;a+=g?-v:v}}}),a}function $(e,r){arguments.length<2&&(r=e.nodes()[0]),Ne(e,{},1,r)}function Ne(e,r,n,t,o){var i=n,u=e.node(t);return r[t]=!0,f(e.neighbors(t),function(a){m(r,a)||(n=Ne(e,r,n,a,t))}),u.low=i,u.lim=n++,o?u.parent=o:delete u.parent,n}function _e(e){return H(e.edges(),function(r){return e.edge(r).cutvalue<0})}function Ie(e,r,n){var t=n.v,o=n.w;r.hasEdge(t,o)||(t=n.w,o=n.v);var i=e.node(t),u=e.node(o),a=i,d=!1;i.lim>u.lim&&(a=u,d=!0);var c=L(r.edges(),function(s){return d===ae(e,e.node(s.v),a)&&d!==ae(e,e.node(s.w),a)});return U(c,function(s){return T(r,s)})}function Re(e,r,n,t){var o=n.v,i=n.w;e.removeEdge(o,i),e.setEdge(t.v,t.w,{}),$(e),Z(e,r),Ar(e,r)}function Ar(e,r){var n=H(e.nodes(),function(o){return!r.node(o).parent}),t=jr(e,n);t=t.slice(1),f(t,function(o){var i=e.node(o).parent,u=r.edge(o,i),a=!1;u||(u=r.edge(i,o),a=!0),r.node(o).rank=r.node(i).rank+(a?u.minlen:-u.minlen)})}function Dr(e,r,n){return e.hasEdge(r,n)}function ae(e,r,n){return n.low<=r.lim&&r.lim<=n.lim}function Jr(e){switch(e.graph().ranker){case"network-simplex":de(e);break;case"tight-tree":Qr(e);break;case"longest-path":Kr(e);break;default:de(e)}}var Kr=X;function Qr(e){X(e),ye(e)}function de(e){x(e)}function Hr(e){var r=I(e,"root",{},"_root"),n=Ur(e),t=k(E(n))-1,o=2*t+1;e.graph().nestingRoot=r,f(e.edges(),function(u){e.edge(u).minlen*=o});var i=Wr(e)+1;f(e.children(),function(u){Me(e,r,o,i,t,n,u)}),e.graph().nodeRankFactor=o}function Me(e,r,n,t,o,i,u){var a=e.children(u);if(!a.length){u!==r&&e.setEdge(r,u,{weight:0,minlen:n});return}var d=oe(e,"_bt"),c=oe(e,"_bb"),s=e.node(u);e.setParent(d,u),s.borderTop=d,e.setParent(c,u),s.borderBottom=c,f(a,function(g){Me(e,r,n,t,o,i,g);var h=e.node(g),v=h.borderTop?h.borderTop:g,l=h.borderBottom?h.borderBottom:g,w=h.borderTop?t:2*t,R=v!==l?1:o-i[u]+1;e.setEdge(d,v,{weight:w,minlen:R,nestingEdge:!0}),e.setEdge(l,c,{weight:w,minlen:R,nestingEdge:!0})}),e.parent(u)||e.setEdge(r,d,{weight:0,minlen:o+i[u]})}function Ur(e){var r={};function n(t,o){var i=e.children(t);i&&i.length&&f(i,function(u){n(u,o+1)}),r[t]=o}return f(e.children(),function(t){n(t,1)}),r}function Wr(e){return G(e.edges(),function(r,n){return r+e.edge(n).weight},0)}function Xr(e){var r=e.graph();e.removeNode(r.nestingRoot),delete r.nestingRoot,f(e.edges(),function(n){var t=e.edge(n);t.nestingEdge&&e.removeEdge(n)})}function Zr(e,r,n){var t={},o;f(n,function(i){for(var u=e.parent(i),a,d;u;){if(a=e.parent(u),a?(d=t[a],t[a]=u):(d=o,o=u),d&&d!==u){r.setEdge(d,u);return}u=a}})}function $r(e,r,n){var t=en(e),o=new y({compound:!0}).setGraph({root:t}).setDefaultNodeLabel(function(i){return e.node(i)});return f(e.nodes(),function(i){var u=e.node(i),a=e.parent(i);(u.rank===r||u.minRank<=r&&r<=u.maxRank)&&(o.setNode(i),o.setParent(i,a||t),f(e[n](i),function(d){var c=d.v===i?d.w:d.v,s=o.edge(c,i),g=b(s)?0:s.weight;o.setEdge(c,i,{weight:e.edge(d).weight+g})}),m(u,"minRank")&&o.setNode(i,{borderLeft:u.borderLeft[r],borderRight:u.borderRight[r]}))}),o}function en(e){for(var r;e.hasNode(r=W("_root")););return r}function rn(e,r){for(var n=0,t=1;t<r.length;++t)n+=nn(e,r[t-1],r[t]);return n}function nn(e,r,n){for(var t=hr(n,p(n,function(c,s){return s})),o=_(p(r,function(c){return C(p(e.outEdges(c),function(s){return{pos:t[s.w],weight:e.edge(s).weight}}),"pos")})),i=1;i<n.length;)i<<=1;var u=2*i-1;i-=1;var a=p(new Array(u),function(){return 0}),d=0;return f(o.forEach(function(c){var s=c.pos+i;a[s]+=c.weight;for(var g=0;s>0;)s%2&&(g+=a[s+1]),s=s-1>>1,a[s]+=c.weight;d+=c.weight*g})),d}function tn(e){var r={},n=L(e.nodes(),function(a){return!e.children(a).length}),t=k(p(n,function(a){return e.node(a).rank})),o=p(N(t+1),function(){return[]});function i(a){if(!m(r,a)){r[a]=!0;var d=e.node(a);o[d.rank].push(a),f(e.successors(a),i)}}var u=C(n,function(a){return e.node(a).rank});return f(u,i),o}function on(e,r){return p(r,function(n){var t=e.inEdges(n);if(t.length){var o=G(t,function(i,u){var a=e.edge(u),d=e.node(u.v);return{sum:i.sum+a.weight*d.order,weight:i.weight+a.weight}},{sum:0,weight:0});return{v:n,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:n}})}function un(e,r){var n={};f(e,function(o,i){var u=n[o.v]={indegree:0,in:[],out:[],vs:[o.v],i};b(o.barycenter)||(u.barycenter=o.barycenter,u.weight=o.weight)}),f(r.edges(),function(o){var i=n[o.v],u=n[o.w];!b(i)&&!b(u)&&(u.indegree++,i.out.push(n[o.w]))});var t=L(n,function(o){return!o.indegree});return an(t)}function an(e){var r=[];function n(i){return function(u){u.merged||(b(u.barycenter)||b(i.barycenter)||u.barycenter>=i.barycenter)&&dn(i,u)}}function t(i){return function(u){u.in.push(i),--u.indegree===0&&e.push(u)}}for(;e.length;){var o=e.pop();r.push(o),f(o.in.reverse(),n(o)),f(o.out,t(o))}return p(L(r,function(i){return!i.merged}),function(i){return S(i,["vs","i","barycenter","weight"])})}function dn(e,r){var n=0,t=0;e.weight&&(n+=e.barycenter*e.weight,t+=e.weight),r.weight&&(n+=r.barycenter*r.weight,t+=r.weight),e.vs=r.vs.concat(e.vs),e.barycenter=n/t,e.weight=t,e.i=Math.min(r.i,e.i),r.merged=!0}function cn(e,r){var n=Ir(e,function(s){return m(s,"barycenter")}),t=n.lhs,o=C(n.rhs,function(s){return-s.i}),i=[],u=0,a=0,d=0;t.sort(fn(!!r)),d=ce(i,o,d),f(t,function(s){d+=s.vs.length,i.push(s.vs),u+=s.barycenter*s.weight,a+=s.weight,d=ce(i,o,d)});var c={vs:_(i)};return a&&(c.barycenter=u/a,c.weight=a),c}function ce(e,r,n){for(var t;r.length&&(t=P(r)).i<=n;)r.pop(),e.push(t.vs),n++;return n}function fn(e){return function(r,n){return r.barycenter<n.barycenter?-1:r.barycenter>n.barycenter?1:e?n.i-r.i:r.i-n.i}}function Te(e,r,n,t){var o=e.children(r),i=e.node(r),u=i?i.borderLeft:void 0,a=i?i.borderRight:void 0,d={};u&&(o=L(o,function(l){return l!==u&&l!==a}));var c=on(e,o);f(c,function(l){if(e.children(l.v).length){var w=Te(e,l.v,n,t);d[l.v]=w,m(w,"barycenter")&&gn(l,w)}});var s=un(c,n);sn(s,d);var g=cn(s,t);if(u&&(g.vs=_([u,g.vs,a]),e.predecessors(u).length)){var h=e.node(e.predecessors(u)[0]),v=e.node(e.predecessors(a)[0]);m(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+h.order+v.order)/(g.weight+2),g.weight+=2}return g}function sn(e,r){f(e,function(n){n.vs=_(n.vs.map(function(t){return r[t]?r[t].vs:t}))})}function gn(e,r){b(e.barycenter)?(e.barycenter=r.barycenter,e.weight=r.weight):(e.barycenter=(e.barycenter*e.weight+r.barycenter*r.weight)/(e.weight+r.weight),e.weight+=r.weight)}function hn(e){var r=we(e),n=fe(e,N(1,r+1),"inEdges"),t=fe(e,N(r-1,-1,-1),"outEdges"),o=tn(e);se(e,o);for(var i=Number.POSITIVE_INFINITY,u,a=0,d=0;d<4;++a,++d){vn(a%2?n:t,a%4>=2),o=F(e);var c=rn(e,o);c<i&&(d=0,u=Ze(o),i=c)}se(e,u)}function fe(e,r,n){return p(r,function(t){return $r(e,t,n)})}function vn(e,r){var n=new y;f(e,function(t){var o=t.graph().root,i=Te(t,o,n,r);f(i.vs,function(u,a){t.node(u).order=a}),Zr(t,n,i.vs)})}function se(e,r){f(r,function(n){f(n,function(t,o){e.node(t).order=o})})}function ln(e){var r=pn(e);f(e.graph().dummyChains,function(n){for(var t=e.node(n),o=t.edgeObj,i=mn(e,r,o.v,o.w),u=i.path,a=i.lca,d=0,c=u[d],s=!0;n!==o.w;){if(t=e.node(n),s){for(;(c=u[d])!==a&&e.node(c).maxRank<t.rank;)d++;c===a&&(s=!1)}if(!s){for(;d<u.length-1&&e.node(c=u[d+1]).minRank<=t.rank;)d++;c=u[d]}e.setParent(n,c),n=e.successors(n)[0]}})}function mn(e,r,n,t){var o=[],i=[],u=Math.min(r[n].low,r[t].low),a=Math.max(r[n].lim,r[t].lim),d,c;d=n;do d=e.parent(d),o.push(d);while(d&&(r[d].low>u||a>r[d].lim));for(c=d,d=t;(d=e.parent(d))!==c;)i.push(d);return{path:o.concat(i.reverse()),lca:c}}function pn(e){var r={},n=0;function t(o){var i=n;f(e.children(o),t),r[o]={low:i,lim:n++}}return f(e.children(),t),r}function wn(e,r){var n={};function t(o,i){var u=0,a=0,d=o.length,c=P(i);return f(i,function(s,g){var h=yn(e,s),v=h?e.node(h).order:d;(h||s===c)&&(f(i.slice(a,g+1),function(l){f(e.predecessors(l),function(w){var R=e.node(w),ee=R.order;(ee<u||v<ee)&&!(R.dummy&&e.node(l).dummy)&&Le(n,w,l)})}),a=g+1,u=v)}),i}return G(r,t),n}function bn(e,r){var n={};function t(i,u,a,d,c){var s;f(N(u,a),function(g){s=i[g],e.node(s).dummy&&f(e.predecessors(s),function(h){var v=e.node(h);v.dummy&&(v.order<d||v.order>c)&&Le(n,h,s)})})}function o(i,u){var a=-1,d,c=0;return f(u,function(s,g){if(e.node(s).dummy==="border"){var h=e.predecessors(s);h.length&&(d=e.node(h[0]).order,t(u,c,g,a,d),c=g,a=d)}t(u,c,u.length,d,i.length)}),u}return G(r,o),n}function yn(e,r){if(e.node(r).dummy)return H(e.predecessors(r),function(n){return e.node(n).dummy})}function Le(e,r,n){if(r>n){var t=r;r=n,n=t}var o=e[r];o||(e[r]=o={}),o[n]=!0}function xn(e,r,n){if(r>n){var t=r;r=n,n=t}return m(e[r],n)}function kn(e,r,n,t){var o={},i={},u={};return f(r,function(a){f(a,function(d,c){o[d]=d,i[d]=d,u[d]=c})}),f(r,function(a){var d=-1;f(a,function(c){var s=t(c);if(s.length){s=C(s,function(w){return u[w]});for(var g=(s.length-1)/2,h=Math.floor(g),v=Math.ceil(g);h<=v;++h){var l=s[h];i[c]===c&&d<u[l]&&!xn(n,c,l)&&(i[l]=c,i[c]=o[c]=o[l],d=u[l])}}})}),{root:o,align:i}}function En(e,r,n,t,o){var i={},u=Nn(e,r,n,o),a=o?"borderLeft":"borderRight";function d(g,h){for(var v=u.nodes(),l=v.pop(),w={};l;)w[l]?g(l):(w[l]=!0,v.push(l),v=v.concat(h(l))),l=v.pop()}function c(g){i[g]=u.inEdges(g).reduce(function(h,v){return Math.max(h,i[v.v]+u.edge(v))},0)}function s(g){var h=u.outEdges(g).reduce(function(l,w){return Math.min(l,i[w.w]-u.edge(w))},Number.POSITIVE_INFINITY),v=e.node(g);h!==Number.POSITIVE_INFINITY&&v.borderType!==a&&(i[g]=Math.max(i[g],h))}return d(c,u.predecessors.bind(u)),d(s,u.successors.bind(u)),f(t,function(g){i[g]=i[n[g]]}),i}function Nn(e,r,n,t){var o=new y,i=e.graph(),u=Tn(i.nodesep,i.edgesep,t);return f(r,function(a){var d;f(a,function(c){var s=n[c];if(o.setNode(s),d){var g=n[d],h=o.edge(g,s);o.setEdge(g,s,Math.max(u(e,c,d),h||0))}d=c})}),o}function _n(e,r){return U(E(r),function(n){var t=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return $e(n,function(i,u){var a=Ln(e,u)/2;t=Math.max(i+a,t),o=Math.min(i-a,o)}),t-o})}function In(e,r){var n=E(r),t=M(n),o=k(n);f(["u","d"],function(i){f(["l","r"],function(u){var a=i+u,d=e[a],c;if(d!==r){var s=E(d);c=u==="l"?t-M(s):o-k(s),c&&(e[a]=O(d,function(g){return g+c}))}})})}function Rn(e,r){return O(e.ul,function(n,t){if(r)return e[r.toLowerCase()][t];var o=C(p(e,t));return(o[1]+o[2])/2})}function Mn(e){var r=F(e),n=J(wn(e,r),bn(e,r)),t={},o;f(["u","d"],function(u){o=u==="u"?r:E(r).reverse(),f(["l","r"],function(a){a==="r"&&(o=p(o,function(g){return E(g).reverse()}));var d=(u==="u"?e.predecessors:e.successors).bind(e),c=kn(e,o,n,d),s=En(e,o,c.root,c.align,a==="r");a==="r"&&(s=O(s,function(g){return-g})),t[u+a]=s})});var i=_n(e,t);return In(t,i),Rn(t,e.graph().align)}function Tn(e,r,n){return function(t,o,i){var u=t.node(o),a=t.node(i),d=0,c;if(d+=u.width/2,m(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":c=-u.width/2;break;case"r":c=u.width/2;break}if(c&&(d+=n?c:-c),c=0,d+=(u.dummy?r:e)/2,d+=(a.dummy?r:e)/2,d+=a.width/2,m(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":c=a.width/2;break;case"r":c=-a.width/2;break}return c&&(d+=n?c:-c),c=0,d}}function Ln(e,r){return e.node(r).width}function Cn(e){e=pe(e),Pn(e),er(Mn(e),function(r,n){e.node(n).x=r})}function Pn(e){var r=F(e),n=e.graph().ranksep,t=0;f(r,function(o){var i=k(p(o,function(u){return e.node(u).height}));f(o,function(u){e.node(u).y=t+i/2}),t+=i+n})}function ut(e,r){var n=Rr;n("layout",function(){var t=n("  buildLayoutGraph",function(){return An(e)});n("  runLayout",function(){Sn(t,n)}),n("  updateInputGraph",function(){Gn(e,t)})})}function Sn(e,r){r("    makeSpaceForEdgeLabels",function(){Dn(e)}),r("    removeSelfEdges",function(){$n(e)}),r("    acyclic",function(){yr(e)}),r("    nestingGraph.run",function(){Hr(e)}),r("    rank",function(){Jr(pe(e))}),r("    injectEdgeLabelProxies",function(){Jn(e)}),r("    removeEmptyRanks",function(){_r(e)}),r("    nestingGraph.cleanup",function(){Xr(e)}),r("    normalizeRanks",function(){Nr(e)}),r("    assignRankMinMax",function(){Kn(e)}),r("    removeEdgeLabelProxies",function(){Qn(e)}),r("    normalize.run",function(){Sr(e)}),r("    parentDummyChains",function(){ln(e)}),r("    addBorderSegments",function(){Mr(e)}),r("    order",function(){hn(e)}),r("    insertSelfEdges",function(){et(e)}),r("    adjustCoordinateSystem",function(){Tr(e)}),r("    position",function(){Cn(e)}),r("    positionSelfEdges",function(){rt(e)}),r("    removeBorderNodes",function(){Zn(e)}),r("    normalize.undo",function(){Or(e)}),r("    fixupEdgeLabelCoords",function(){Wn(e)}),r("    undoCoordinateSystem",function(){Lr(e)}),r("    translateGraph",function(){Hn(e)}),r("    assignNodeIntersects",function(){Un(e)}),r("    reversePoints",function(){Xn(e)}),r("    acyclic.undo",function(){kr(e)})}function Gn(e,r){f(e.nodes(),function(n){var t=e.node(n),o=r.node(n);t&&(t.x=o.x,t.y=o.y,r.children(n).length&&(t.width=o.width,t.height=o.height))}),f(e.edges(),function(n){var t=e.edge(n),o=r.edge(n);t.points=o.points,m(o,"x")&&(t.x=o.x,t.y=o.y)}),e.graph().width=r.graph().width,e.graph().height=r.graph().height}var On=["nodesep","edgesep","ranksep","marginx","marginy"],Fn={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Vn=["acyclicer","ranker","rankdir","align"],qn=["width","height"],Bn={width:0,height:0},Yn=["minlen","weight","width","height","labeloffset"],jn={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},zn=["labelpos"];function An(e){var r=new y({multigraph:!0,compound:!0}),n=A(e.graph());return r.setGraph(J({},Fn,z(n,On),S(n,Vn))),f(e.nodes(),function(t){var o=A(e.node(t));r.setNode(t,Be(z(o,qn),Bn)),r.setParent(t,e.parent(t))}),f(e.edges(),function(t){var o=A(e.edge(t));r.setEdge(t,J({},jn,z(o,Yn),S(o,zn)))}),r}function Dn(e){var r=e.graph();r.ranksep/=2,f(e.edges(),function(n){var t=e.edge(n);t.minlen*=2,t.labelpos.toLowerCase()!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?t.width+=t.labeloffset:t.height+=t.labeloffset)})}function Jn(e){f(e.edges(),function(r){var n=e.edge(r);if(n.width&&n.height){var t=e.node(r.v),o=e.node(r.w),i={rank:(o.rank-t.rank)/2+t.rank,e:r};I(e,"edge-proxy",i,"_ep")}})}function Kn(e){var r=0;f(e.nodes(),function(n){var t=e.node(n);t.borderTop&&(t.minRank=e.node(t.borderTop).rank,t.maxRank=e.node(t.borderBottom).rank,r=k(r,t.maxRank))}),e.graph().maxRank=r}function Qn(e){f(e.nodes(),function(r){var n=e.node(r);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(r))})}function Hn(e){var r=Number.POSITIVE_INFINITY,n=0,t=Number.POSITIVE_INFINITY,o=0,i=e.graph(),u=i.marginx||0,a=i.marginy||0;function d(c){var s=c.x,g=c.y,h=c.width,v=c.height;r=Math.min(r,s-h/2),n=Math.max(n,s+h/2),t=Math.min(t,g-v/2),o=Math.max(o,g+v/2)}f(e.nodes(),function(c){d(e.node(c))}),f(e.edges(),function(c){var s=e.edge(c);m(s,"x")&&d(s)}),r-=u,t-=a,f(e.nodes(),function(c){var s=e.node(c);s.x-=r,s.y-=t}),f(e.edges(),function(c){var s=e.edge(c);f(s.points,function(g){g.x-=r,g.y-=t}),m(s,"x")&&(s.x-=r),m(s,"y")&&(s.y-=t)}),i.width=n-r+u,i.height=o-t+a}function Un(e){f(e.edges(),function(r){var n=e.edge(r),t=e.node(r.v),o=e.node(r.w),i,u;n.points?(i=n.points[0],u=n.points[n.points.length-1]):(n.points=[],i=o,u=t),n.points.unshift(te(t,i)),n.points.push(te(o,u))})}function Wn(e){f(e.edges(),function(r){var n=e.edge(r);if(m(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function Xn(e){f(e.edges(),function(r){var n=e.edge(r);n.reversed&&n.points.reverse()})}function Zn(e){f(e.nodes(),function(r){if(e.children(r).length){var n=e.node(r),t=e.node(n.borderTop),o=e.node(n.borderBottom),i=e.node(P(n.borderLeft)),u=e.node(P(n.borderRight));n.width=Math.abs(u.x-i.x),n.height=Math.abs(o.y-t.y),n.x=i.x+n.width/2,n.y=t.y+n.height/2}}),f(e.nodes(),function(r){e.node(r).dummy==="border"&&e.removeNode(r)})}function $n(e){f(e.edges(),function(r){if(r.v===r.w){var n=e.node(r.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:r,label:e.edge(r)}),e.removeEdge(r)}})}function et(e){var r=F(e);f(r,function(n){var t=0;f(n,function(o,i){var u=e.node(o);u.order=i+t,f(u.selfEdges,function(a){I(e,"selfedge",{width:a.label.width,height:a.label.height,rank:u.rank,order:i+ ++t,e:a.e,label:a.label},"_se")}),delete u.selfEdges})})}function rt(e){f(e.nodes(),function(r){var n=e.node(r);if(n.dummy==="selfedge"){var t=e.node(n.e.v),o=t.x+t.width/2,i=t.y,u=n.x-o,a=t.height/2;e.setEdge(n.e,n.label),e.removeNode(r),n.label.points=[{x:o+2*u/3,y:i-a},{x:o+5*u/6,y:i-a},{x:o+u,y:i},{x:o+5*u/6,y:i+a},{x:o+2*u/3,y:i+a}],n.label.x=n.x,n.label.y=n.y}})}function z(e,r){return O(S(e,r),Number)}function A(e){var r={};return f(e,function(n,t){r[t.toLowerCase()]=n}),r}export{ut as l};
