import{b as l,c as n}from"./NcNoteCard-C6xb7vi0-V0bGpS3H.chunk.mjs";import{N as o}from"./NcCheckboxRadioSwitch-VeztTzpz-DqrPZaxq.chunk.mjs";import{n as a}from"./_plugin-vue2_normalizer-XSZyZ-Zg.chunk.mjs";import{A as u}from"./AvatarWrapper-CCyq0sL8.chunk.mjs";import{C as c,f as p}from"./useEditorMethods-B_bwXkGS.chunk.mjs";import{l as d}from"./index-DfiDB3im.chunk.mjs";import{c as m,_ as h}from"./NcLoadingIcon-CEAyVu2t.chunk.mjs";import"./index-6AQ8QgJK.chunk.mjs";import"./emoji-picker-DwlFXcXb.chunk.mjs";import"./vue.runtime.esm-CuYTBykc.chunk.mjs";import"./logger-DVPLBGl3.chunk.mjs";import"./MediaHandler.provider-DV_yetSH.chunk.mjs";const f={name:"AccountMultipleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var _=function(){var e=this,s=e._self._c;return s("span",e._b({staticClass:"material-design-icon account-multiple-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[s("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M16 17V19H2V17S2 13 9 13 16 17 16 17M12.5 7.5A3.5 3.5 0 1 0 9 11A3.5 3.5 0 0 0 12.5 7.5M15.94 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13M15 4A3.39 3.39 0 0 0 13.07 4.59A5 5 0 0 1 13.07 10.41A3.39 3.39 0 0 0 15 11A3.5 3.5 0 0 0 15 4Z"}},[e.title?s("title",[e._v(e._s(e.title))]):e._e()])])])},v=[],g=a(f,_,v,!1,null,null);const C=g.exports,b={name:"SessionList",components:{AccountMultipleIcon:C,AvatarWrapper:u,NcButton:n,NcPopover:l,NcCheckboxRadioSwitch:o},props:{sessions:{type:Object,default:()=>({})}},data(){return{myName:"",isFullWidth:d("text","is_full_width_editor",!1)}},computed:{label(){return t("text","Active people")},participantsPopover(){return this.currentSession?.guestName?this.participantsWithoutCurrent:this.participants},participantsWithoutCurrent(){return this.participants.filter(e=>!e.isCurrent)},participants(){return Object.values(this.sessions).filter(e=>e.lastContact>Date.now()/1e3-p&&(e.userId!==null||e.guestName!==null)).sort((e,s)=>e.lastContact<s.lastContact)},currentSession(){return Object.values(this.sessions).find(e=>e.isCurrent)},avatarStyle(){return e=>({opacity:e.lastContact>Date.now()/1e3-c?1:.5})},sessionsVisible(){return this.participantsWithoutCurrent.slice(0,3)}},methods:{onWidthToggle(e){this.isFullWidth=e,this.$emit("editor-width-change",e?"100%":"80ch"),m.post(h("/apps/text/settings"),{key:"is_full_width_editor",value:e?"1":"0"})}}};var y=function(){var e=this,s=e._self._c;return s("NcPopover",{staticClass:"session-list",attrs:{placement:"bottom"},scopedSlots:e._u([{key:"trigger",fn:function({attrs:i}){return[s("div",[s("NcButton",e._b({staticClass:"avatar-list",attrs:{title:e.label,"aria-label":e.label,type:"tertiary"},scopedSlots:e._u([{key:"icon",fn:function(){return[s("AccountMultipleIcon",{attrs:{size:20}}),e._l(e.sessionsVisible,function(r){return s("AvatarWrapper",{key:r.id,attrs:{session:r,size:28}})})]},proxy:!0}],null,!0)},"NcButton",i,!1))],1)]}},{key:"default",fn:function(){return[s("div",{staticClass:"session-menu"},[e._t("lastSaved"),s("ul",[e._t("default"),e._l(e.participantsPopover,function(i){return s("li",{key:i.id,style:e.avatarStyle(i)},[s("AvatarWrapper",{attrs:{session:i,size:36}}),s("span",{staticClass:"session-label"},[e._v(" "+e._s(i.userId?i.displayName:i.guestName?i.guestName:e.t("text","Guest"))+" ")]),i.userId===null?s("span",{staticClass:"guest-label"},[e._v("("+e._s(e.t("text","guest"))+")")]):e._e()],1)}),s("li",[s("NcCheckboxRadioSwitch",{attrs:{checked:e.isFullWidth},on:{"update:checked":e.onWidthToggle}},[e._v(" "+e._s(e.t("text","Full width editor"))+" ")])],1)],2)],2)]},proxy:!0}],null,!0)})},x=[],A=a(b,y,x,!1,null,"b102370b");const j=A.exports;export{j as default};
//# sourceMappingURL=SessionList-DIAXgMTK.chunk.mjs.map
