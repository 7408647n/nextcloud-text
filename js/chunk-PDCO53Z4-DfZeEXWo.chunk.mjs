/*! third party licenses: js/vendor.LICENSE.txt */
import{a as x}from"./chunk-Z2VRG6XP-CI1oW2B3.chunk.mjs";import{_ as g,d as w,A as W,D as B,j as H,l as k,ae as X,u,af as Y,a2 as C,a8 as R}from"./mermaid.core-sVubBsni.chunk.mjs";var U=g((a,t,e,c)=>{t.forEach(o=>{V[o](a,e,c)})},"insertMarkers"),Z=g((a,t,e)=>{k.trace("Making markers for ",e),a.append("defs").append("marker").attr("id",e+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),a.append("defs").append("marker").attr("id",e+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),O=g((a,t,e)=>{a.append("defs").append("marker").attr("id",e+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),a.append("defs").append("marker").attr("id",e+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),N=g((a,t,e)=>{a.append("defs").append("marker").attr("id",e+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),a.append("defs").append("marker").attr("id",e+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),A=g((a,t,e)=>{a.append("defs").append("marker").attr("id",e+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),a.append("defs").append("marker").attr("id",e+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),I=g((a,t,e)=>{a.append("defs").append("marker").attr("id",e+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),a.append("defs").append("marker").attr("id",e+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),q=g((a,t,e)=>{a.append("marker").attr("id",e+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),a.append("marker").attr("id",e+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),z=g((a,t,e)=>{a.append("marker").attr("id",e+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),a.append("marker").attr("id",e+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),J=g((a,t,e)=>{a.append("marker").attr("id",e+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),a.append("marker").attr("id",e+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),Q=g((a,t,e)=>{a.append("defs").append("marker").attr("id",e+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),V={extension:Z,composition:O,aggregation:N,dependency:A,lollipop:I,point:q,circle:z,cross:J,barb:Q},et=U,j=g((a,t,e,c,o)=>{t.arrowTypeStart&&_(a,"start",t.arrowTypeStart,e,c,o),t.arrowTypeEnd&&_(a,"end",t.arrowTypeEnd,e,c,o)},"addEdgeMarkers"),D={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},_=g((a,t,e,c,o,l)=>{const n=D[e];if(!n){k.warn("Unknown arrow type: ".concat(e));return}const r=t==="start"?"Start":"End";a.attr("marker-".concat(t),"url(".concat(c,"#").concat(o,"_").concat(l,"-").concat(n).concat(r,")"))},"addEdgeMarker"),M={},m={},at=g(()=>{M={},m={}},"clear"),rt=g((a,t)=>{const e=w(),c=W(e.flowchart.htmlLabels),o=t.labelType==="markdown"?B(a,t.label,{style:t.labelStyle,useHtmlLabels:c,addSvgBackground:!0},e):x(t.label,t.labelStyle),l=a.insert("g").attr("class","edgeLabel"),n=l.insert("g").attr("class","label");n.node().appendChild(o);let r=o.getBBox();if(c){const d=o.children[0],i=H(o);r=d.getBoundingClientRect(),i.attr("width",r.width),i.attr("height",r.height)}n.attr("transform","translate("+-r.width/2+", "+-r.height/2+")"),M[t.id]=l,t.width=r.width,t.height=r.height;let s;if(t.startLabelLeft){const d=x(t.startLabelLeft,t.labelStyle),i=a.insert("g").attr("class","edgeTerminals"),h=i.insert("g").attr("class","inner");s=h.node().appendChild(d);const p=d.getBBox();h.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),m[t.id]||(m[t.id]={}),m[t.id].startLeft=i,L(s,t.startLabelLeft)}if(t.startLabelRight){const d=x(t.startLabelRight,t.labelStyle),i=a.insert("g").attr("class","edgeTerminals"),h=i.insert("g").attr("class","inner");s=i.node().appendChild(d),h.node().appendChild(d);const p=d.getBBox();h.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),m[t.id]||(m[t.id]={}),m[t.id].startRight=i,L(s,t.startLabelRight)}if(t.endLabelLeft){const d=x(t.endLabelLeft,t.labelStyle),i=a.insert("g").attr("class","edgeTerminals"),h=i.insert("g").attr("class","inner");s=h.node().appendChild(d);const p=d.getBBox();h.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),i.node().appendChild(d),m[t.id]||(m[t.id]={}),m[t.id].endLeft=i,L(s,t.endLabelLeft)}if(t.endLabelRight){const d=x(t.endLabelRight,t.labelStyle),i=a.insert("g").attr("class","edgeTerminals"),h=i.insert("g").attr("class","inner");s=h.node().appendChild(d);const p=d.getBBox();h.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),i.node().appendChild(d),m[t.id]||(m[t.id]={}),m[t.id].endRight=i,L(s,t.endLabelRight)}return o},"insertEdgeLabel");function L(a,t){w().flowchart.htmlLabels&&a&&(a.style.width=t.length*9+"px",a.style.height="12px")}g(L,"setTerminalWidth");var st=g((a,t)=>{k.debug("Moving label abc88 ",a.id,a.label,M[a.id],t);let e=t.updatedPath?t.updatedPath:t.originalPath;const c=w(),{subGraphTitleTotalMargin:o}=X(c);if(a.label){const l=M[a.id];let n=a.x,r=a.y;if(e){const s=u.calcLabelPosition(e);k.debug("Moving label "+a.label+" from (",n,",",r,") to (",s.x,",",s.y,") abc88"),t.updatedPath&&(n=s.x,r=s.y)}l.attr("transform","translate(".concat(n,", ").concat(r+o/2,")"))}if(a.startLabelLeft){const l=m[a.id].startLeft;let n=a.x,r=a.y;if(e){const s=u.calcTerminalLabelPosition(a.arrowTypeStart?10:0,"start_left",e);n=s.x,r=s.y}l.attr("transform","translate(".concat(n,", ").concat(r,")"))}if(a.startLabelRight){const l=m[a.id].startRight;let n=a.x,r=a.y;if(e){const s=u.calcTerminalLabelPosition(a.arrowTypeStart?10:0,"start_right",e);n=s.x,r=s.y}l.attr("transform","translate(".concat(n,", ").concat(r,")"))}if(a.endLabelLeft){const l=m[a.id].endLeft;let n=a.x,r=a.y;if(e){const s=u.calcTerminalLabelPosition(a.arrowTypeEnd?10:0,"end_left",e);n=s.x,r=s.y}l.attr("transform","translate(".concat(n,", ").concat(r,")"))}if(a.endLabelRight){const l=m[a.id].endRight;let n=a.x,r=a.y;if(e){const s=u.calcTerminalLabelPosition(a.arrowTypeEnd?10:0,"end_right",e);n=s.x,r=s.y}l.attr("transform","translate(".concat(n,", ").concat(r,")"))}},"positionEdgeLabel"),G=g((a,t)=>{const e=a.x,c=a.y,o=Math.abs(t.x-e),l=Math.abs(t.y-c),n=a.width/2,r=a.height/2;return o>=n||l>=r},"outsideNode"),F=g((a,t,e)=>{k.debug("intersection calc abc89:\n  outsidePoint: ".concat(JSON.stringify(t),"\n  insidePoint : ").concat(JSON.stringify(e),"\n  node        : x:").concat(a.x," y:").concat(a.y," w:").concat(a.width," h:").concat(a.height));const c=a.x,o=a.y,l=Math.abs(c-e.x),n=a.width/2;let r=e.x<t.x?n-l:n+l;const s=a.height/2,d=Math.abs(t.y-e.y),i=Math.abs(t.x-e.x);if(Math.abs(o-t.y)*n>Math.abs(c-t.x)*s){let h=e.y<t.y?t.y-s-o:o-s-t.y;r=i*h/d;const p={x:e.x<t.x?e.x+r:e.x-i+r,y:e.y<t.y?e.y+d-h:e.y-d+h};return r===0&&(p.x=t.x,p.y=t.y),i===0&&(p.x=t.x),d===0&&(p.y=t.y),k.debug("abc89 topp/bott calc, Q ".concat(d,", q ").concat(h,", R ").concat(i,", r ").concat(r),p),p}else{e.x<t.x?r=t.x-n-c:r=c-n-t.x;let h=d*r/i,p=e.x<t.x?e.x+i-r:e.x-i+r,y=e.y<t.y?e.y+h:e.y-h;return k.debug("sides calc abc89, Q ".concat(d,", q ").concat(h,", R ").concat(i,", r ").concat(r),{_x:p,_y:y}),r===0&&(p=t.x,y=t.y),i===0&&(p=t.x),d===0&&(y=t.y),{x:p,y}}},"intersection"),S=g((a,t)=>{k.debug("abc88 cutPathAtIntersect",a,t);let e=[],c=a[0],o=!1;return a.forEach(l=>{if(!G(t,l)&&!o){const n=F(t,c,l);let r=!1;e.forEach(s=>{r=r||s.x===n.x&&s.y===n.y}),e.some(s=>s.x===n.x&&s.y===n.y)||e.push(n),o=!0}else c=l,o||e.push(l)}),e},"cutPathAtIntersect"),nt=g(function(a,t,e,c,o,l,n){let r=e.points;k.debug("abc88 InsertEdge: edge=",e,"e=",t);let s=!1;const d=l.node(t.v);var i=l.node(t.w);i!=null&&i.intersect&&(d!=null&&d.intersect)&&(r=r.slice(1,e.points.length-1),r.unshift(d.intersect(r[0])),r.push(i.intersect(r[r.length-1]))),e.toCluster&&(k.debug("to cluster abc88",c[e.toCluster]),r=S(e.points,c[e.toCluster].node),s=!0),e.fromCluster&&(k.debug("from cluster abc88",c[e.fromCluster]),r=S(r.reverse(),c[e.fromCluster].node).reverse(),s=!0);const h=r.filter(T=>!Number.isNaN(T.y));let p=R;e.curve&&(o==="graph"||o==="flowchart")&&(p=e.curve);const{x:y,y:E}=Y(e),P=C().x(y).y(E).curve(p);let f;switch(e.thickness){case"normal":f="edge-thickness-normal";break;case"thick":f="edge-thickness-thick";break;case"invisible":f="edge-thickness-thick";break;default:f=""}switch(e.pattern){case"solid":f+=" edge-pattern-solid";break;case"dotted":f+=" edge-pattern-dotted";break;case"dashed":f+=" edge-pattern-dashed";break}const v=a.append("path").attr("d",P(h)).attr("id",e.id).attr("class"," "+f+(e.classes?" "+e.classes:"")).attr("style",e.style);let b="";(w().flowchart.arrowMarkerAbsolute||w().state.arrowMarkerAbsolute)&&(b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,b=b.replace(/\(/g,"\\("),b=b.replace(/\)/g,"\\)")),j(v,e,b,n,o);let $={};return s&&($.updatedPath=r),$.originalPath=e.points,$},"insertEdge");export{nt as a,at as c,rt as i,et as m,st as p};
