import{n as a,N as o}from"./isDarkTheme-C_WHy9lG.chunk.mjs";import{k as l,f as n,c as u,_ as c}from"./index-D9k5bC65.chunk.mjs";import"./index-HQWwoT4K.chunk.mjs";import{l as p}from"./index-DfiDB3im.chunk.mjs";import{A as d}from"./AvatarWrapper-BENXG8JI.chunk.mjs";import{C as m,a as h}from"./Editor-BaRjbRJS.chunk.mjs";import"./vue.runtime.esm-D5oVStfN.chunk.mjs";import"./emoji-picker-_ZUJ6YnW.chunk.mjs";import"./modulepreload-polyfill-CBWYtosv.chunk.mjs";import"./index-CQ7KUAii.chunk.mjs";import"./dav-Co9y-hkg-DFNqYHbT.chunk.mjs";import"./_plugin-vue2_normalizer--qmvqNVe-Cl4S2YUD.chunk.mjs";import"./EditorOutline-RQEFtjGn.chunk.mjs";import"./MediaHandler.provider-BQgMXB6j.chunk.mjs";import"./logger-Csk1_XRx.chunk.mjs";import"./Wrapper-BQjpjbEW.chunk.mjs";import"./NcDialog-I_9fyJVt-C1bSD2l_.chunk.mjs";const f={name:"AccountMultipleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var _=function(){var e=this,s=e._self._c;return s("span",e._b({staticClass:"material-design-icon account-multiple-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[s("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[s("path",{attrs:{d:"M16 17V19H2V17S2 13 9 13 16 17 16 17M12.5 7.5A3.5 3.5 0 1 0 9 11A3.5 3.5 0 0 0 12.5 7.5M15.94 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13M15 4A3.39 3.39 0 0 0 13.07 4.59A5 5 0 0 1 13.07 10.41A3.39 3.39 0 0 0 15 11A3.5 3.5 0 0 0 15 4Z"}},[e.title?s("title",[e._v(e._s(e.title))]):e._e()])])])},v=[],g=a(f,_,v,!1,null,null);const C=g.exports,y={name:"SessionList",components:{AccountMultipleIcon:C,AvatarWrapper:d,NcButton:n,NcPopover:l,NcCheckboxRadioSwitch:o},props:{sessions:{type:Object,default:()=>({})}},data(){return{myName:"",isFullWidth:p("text","is_full_width_editor",!1)}},computed:{label(){return t("text","Active people")},participantsPopover(){return this.currentSession?.guestName?this.participantsWithoutCurrent:this.participants},participantsWithoutCurrent(){return this.participants.filter(e=>!e.isCurrent)},participants(){return Object.values(this.sessions).filter(e=>e.lastContact>Date.now()/1e3-h&&(e.userId!==null||e.guestName!==null)).sort((e,s)=>e.lastContact<s.lastContact)},currentSession(){return Object.values(this.sessions).find(e=>e.isCurrent)},avatarStyle(){return e=>({opacity:e.lastContact>Date.now()/1e3-m?1:.5})},sessionsVisible(){return this.participantsWithoutCurrent.slice(0,3)}},methods:{onWidthToggle(e){this.isFullWidth=e,this.$emit("editor-width-change",e?"100%":"80ch"),u.post(c("/apps/text/settings"),{key:"is_full_width_editor",value:e?"1":"0"})}}};var b=function(){var e=this,s=e._self._c;return s("NcPopover",{staticClass:"session-list",attrs:{placement:"bottom"},scopedSlots:e._u([{key:"trigger",fn:function({attrs:i}){return[s("div",[s("NcButton",e._b({staticClass:"avatar-list",attrs:{title:e.label,"aria-label":e.label,type:"tertiary"},scopedSlots:e._u([{key:"icon",fn:function(){return[s("AccountMultipleIcon",{attrs:{size:20}}),e._l(e.sessionsVisible,function(r){return s("AvatarWrapper",{key:r.id,attrs:{session:r,size:28}})})]},proxy:!0}],null,!0)},"NcButton",i,!1))],1)]}},{key:"default",fn:function(){return[s("div",{staticClass:"session-menu"},[e._t("lastSaved"),s("ul",[e._t("default"),e._l(e.participantsPopover,function(i){return s("li",{key:i.id,style:e.avatarStyle(i)},[s("AvatarWrapper",{attrs:{session:i,size:36}}),s("span",{staticClass:"session-label"},[e._v(" "+e._s(i.userId?i.displayName:i.guestName?i.guestName:e.t("text","Guest"))+" ")]),i.userId===null?s("span",{staticClass:"guest-label"},[e._v("("+e._s(e.t("text","guest"))+")")]):e._e()],1)}),s("li",[s("NcCheckboxRadioSwitch",{attrs:{checked:e.isFullWidth},on:{"update:checked":e.onWidthToggle}},[e._v(" "+e._s(e.t("text","Full width editor"))+" ")])],1)],2)],2)]},proxy:!0}],null,!0)})},x=[],A=a(y,b,x,!1,null,"fafdacd7");const R=A.exports;export{R as default};
//# sourceMappingURL=SessionList-BUUK7-Al.chunk.mjs.map
