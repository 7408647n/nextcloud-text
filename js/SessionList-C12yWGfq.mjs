/*! third party licenses: js/vendor.LICENSE.txt */
import"./NcTextArea-XCi8a16Y-C_MOS1MN.mjs";import{ak as i}from"./NcNoteCard-e7-Bxio8-C8VbD_-Z.mjs";import"./modulepreload-polyfill-sPpBbGTg.mjs";import"./index-B_IeTaWR.mjs";import{A as o}from"./AvatarWrapper-CjtIXOHJ.mjs";import{m as n,b as u}from"./index-i2AGmyzO.mjs";import{a9 as l}from"./RichText-BZ2es64B.mjs";import{b as p,c}from"./Wrapper-CMIQy2nI.mjs";import{n as m}from"./_plugin-vue2_normalizer-BWKvF6pj.mjs";import"./vue.runtime.esm-Dd7ivler.mjs";import"./index-vg7q3Iku.mjs";import"./index-JIoUbqnp.mjs";import"./index-Ubm2itxG.mjs";import"./MediaHandler.provider-1iIgeCoH.mjs";import"./logger-BbhzF1HX.mjs";const h={name:"SessionList",components:{AvatarWrapper:o,NcPopover:i},mixins:[l],props:{sessions:{type:Object,default:()=>({})}},data(){return{myName:""}},computed:{...n({storeShowAuthorAnnotations:s=>s.text.showAuthorAnnotations}),label(){return t("text","Active people")},showAuthorAnnotations:{get(){return this.storeShowAuthorAnnotations},set(s){this.setShowAuthorAnnotations(s)}},participantsPopover(){var s;return(s=this.currentSession)!=null&&s.guestName?this.participantsWithoutCurrent:this.participants},participantsWithoutCurrent(){return this.participants.filter(s=>!s.isCurrent)},participants(){return Object.values(this.sessions).filter(s=>s.lastContact>Date.now()/1e3-p&&(s.userId!==null||s.guestName!==null)).sort((s,e)=>s.lastContact<e.lastContact)},currentSession(){return Object.values(this.sessions).find(s=>s.isCurrent)},avatarStyle(){return s=>({opacity:s.lastContact>Date.now()/1e3-c?1:.5})},sessionsVisible(){return this.participantsWithoutCurrent.slice(0,3)}},methods:{...u("text",["setShowAuthorAnnotations"])}};var v=function(){var s=this,e=s._self._c;return e("NcPopover",{staticClass:"session-list",attrs:{placement:"bottom"},scopedSlots:s._u([{key:"trigger",fn:function({attrs:r}){return[e("div",[e("button",s._b({staticClass:"avatar-list",attrs:{title:s.label,"aria-label":s.label}},"button",r,!1),[e("div",{staticClass:"avatardiv icon-group"}),s._l(s.sessionsVisible,function(a){return e("AvatarWrapper",{key:a.id,attrs:{session:a,size:40}})})],2)])]}},{key:"default",fn:function(){return[e("div",{staticClass:"session-menu"},[s._t("lastSaved"),e("ul",[s._t("default"),s._l(s.participantsPopover,function(r){return e("li",{key:r.id,style:s.avatarStyle(r)},[e("AvatarWrapper",{attrs:{session:r,size:36}}),e("span",{staticClass:"session-label"},[s._v(" "+s._s(r.userId?r.displayName:r.guestName?r.guestName:s.t("text","Guest"))+" ")]),r.userId===null?e("span",{staticClass:"guest-label"},[s._v("("+s._s(s.t("text","guest"))+")")]):s._e()],1)})],2)],2)]},proxy:!0}],null,!0)})},d=[],f=m(h,v,d,!1,null,"2a1a8c6d",null,null);const O=f.exports;export{O as default};
