const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.OC.filePath('text', '', 'js/Editor-Ds-rHhbS.chunk.mjs'),window.OC.filePath('text', '', 'js/modulepreload-polyfill-Cp76Uzro.chunk.mjs'),window.OC.filePath('text', '', 'js/vue.runtime.esm-8l0cPn1o.chunk.mjs'),window.OC.filePath('text', '', 'js/index-BS7Lr8Ce.chunk.mjs'),window.OC.filePath('text', '', 'js/emoji-picker-_ZUJ6YnW.chunk.mjs'),window.OC.filePath('text', '', 'js/index-DfiDB3im.chunk.mjs'),window.OC.filePath('text', '', 'js/index-ff0yrSz9.chunk.mjs'),window.OC.filePath('text', '', 'css/index-DG0nQhh6.chunk.css'),window.OC.filePath('text', '', 'js/index-Boa7tDUB.chunk.mjs'),window.OC.filePath('text', '', 'js/_plugin-vue2_normalizer--qmvqNVe-CA3DQ51-.chunk.mjs'),window.OC.filePath('text', '', 'js/RichText-COxagtVZ.chunk.mjs'),window.OC.filePath('text', '', 'js/_plugin-vue2_normalizer-cSI6RZT0.chunk.mjs'),window.OC.filePath('text', '', 'css/_plugin-vue2_normalizer-qC8o6FCo.chunk.css'),window.OC.filePath('text', '', 'js/MediaHandler.provider-DV5fmro6.chunk.mjs'),window.OC.filePath('text', '', 'js/logger-CaFEa2J0.chunk.mjs'),window.OC.filePath('text', '', 'css/RichText-Deqv3M8R.chunk.css'),window.OC.filePath('text', '', 'js/Wrapper-C1wef5KM.chunk.mjs'),window.OC.filePath('text', '', 'js/NcDialog-I_9fyJVt-DIvqUCg4.chunk.mjs'),window.OC.filePath('text', '', 'css/Wrapper-Cf5RNHTz.chunk.css'),window.OC.filePath('text', '', 'css/Editor-MZiTpsxn.chunk.css')])))=>i.map(i=>d[i]);
import{_ as s}from"./modulepreload-polyfill-Cp76Uzro.chunk.mjs";import{l as d}from"./index-DfiDB3im.chunk.mjs";import{g as m}from"./index-ff0yrSz9.chunk.mjs";import{registerFileActionFallback as c,registerFileCreate as u}from"./files-CZiI-6-6.chunk.mjs";import{l as f}from"./logger-CaFEa2J0.chunk.mjs";import{b as h}from"./mime-CuxkK4Yj.chunk.mjs";import{s as w,e as _}from"./index-BS7Lr8Ce.chunk.mjs";import g from"./RichWorkspace-BD3IZcxl.chunk.mjs";import"./vue.runtime.esm-8l0cPn1o.chunk.mjs";import"./emoji-picker-_ZUJ6YnW.chunk.mjs";import"./_plugin-vue2_normalizer--qmvqNVe-CA3DQ51-.chunk.mjs";import"./index-Boa7tDUB.chunk.mjs";import"./Editor.singleton-DnwAONMg.chunk.mjs";import"./RichTextReader-DesLGckg.chunk.mjs";import"./BaseReader-BjvoMhKB.chunk.mjs";import"./RichText-COxagtVZ.chunk.mjs";import"./_plugin-vue2_normalizer-cSI6RZT0.chunk.mjs";import"./MediaHandler.provider-DV5fmro6.chunk.mjs";const y=function(e){const i=()=>setTimeout(e,0);(document.attachEvent?document.readyState==="complete":document.readyState!=="loading")?i():document.addEventListener("DOMContentLoaded",e)},E={attach(e){const i=e.fileList,o=t("text","Readme")+"."+d("text","default_file_extension");i.id!=="files"&&i.id!=="files.public"||e.addMenuEntry({id:"rich-workspace-init",displayName:t("text","Add folder description"),templateName:o,iconClass:"icon-add-folder-description",fileType:"file",useInput:!1,actionHandler(){return window.FileList.createFile(o,{scrollTo:!1,animate:!1}).then(()=>_("Text::showRichWorkspace",{autofocus:!0}))},shouldShow(){return!i.findFile(o)}})}},C={el:null,attach(e){e.id!=="files"&&e.id!=="files.public"||(this.el=document.createElement("div"),e.registerHeader({id:"workspace",el:this.el,render:this.render.bind(this),priority:10}))},render(e){e.id!=="files"&&e.id!=="files.public"||(OC.Plugins.register("OCA.Files.NewFileMenu",E),s(()=>import("./vue.runtime.esm-8l0cPn1o.chunk.mjs").then(i=>i.x),[],import.meta.url).then(i=>{const o=i.default;this.el.id="files-workspace-wrapper",o.prototype.t=window.t,o.prototype.n=window.n,o.prototype.OCA=window.OCA;const a=o.extend(g),n=new a({propsData:{path:e.getCurrentDirectory(),hasRichWorkspace:!0}}).$mount(this.el);w("files:navigation:changed",()=>{n.active=OCA.Files.App.getCurrentFileList()===e}),e.$el.on("urlChanged",r=>{n.path=r.dir.toString()}),e.$el.on("changeDirectory",r=>{n.path=r.dir.toString()})}))}},O=({sharingToken:e,mimetype:i,fileId:o,$el:a})=>{const n=document.createElement("div");n.id="texteditor",document.getElementById("app-content").appendChild(n),Promise.all([s(()=>import("./vue.runtime.esm-8l0cPn1o.chunk.mjs").then(r=>r.x),[],import.meta.url),s(()=>import("./Editor-Ds-rHhbS.chunk.mjs").then(r=>r.b),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url)]).then(([r,l])=>({Vue:r.default,Editor:l.default})).then(({Vue:r,Editor:l})=>{r.prototype.t=window.t,r.prototype.OCA=window.OCA,new r({render:p=>p(l,{props:{active:!0,shareToken:e,mime:i,fileId:o}})}).$mount(a)}).catch(r=>f.error("Failed to attach editor",{error:r}))};y(()=>{const e=m();if(!e)return;if(document.querySelector("#preview table.files-filestable")){OC.Plugins.register("OCA.Files.FileList",C),c(),u();return}const i=document.getElementById("mimetype")?.value;if(i&&h.indexOf(i)!==-1){const o=document.getElementById("preview"),a=d("text","file_id");O({mimetype:i,sharingToken:e,fileId:a,$el:o})}}),OCA.Text={RichWorkspaceEnabled:d("text","workspace_available"),OpenReadOnlyEnabled:d("text","open_read_only_enabled")};
