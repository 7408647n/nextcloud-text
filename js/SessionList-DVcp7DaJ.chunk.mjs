import{n as a,N as o}from"./isDarkTheme-CDtFyupZ.chunk.mjs";import{f as n,c as l,_ as p}from"./index-HzSm2nlG.chunk.mjs";import"./index-HQWwoT4K.chunk.mjs";import{l as u}from"./index-DfiDB3im.chunk.mjs";import{A as c}from"./AvatarWrapper-DW1tdYW2.chunk.mjs";import{C as d,a as m}from"./Editor-CsfZfj52.chunk.mjs";import"./vue.runtime.esm-D5oVStfN.chunk.mjs";import"./emoji-picker-_ZUJ6YnW.chunk.mjs";import"./modulepreload-polyfill-CBWYtosv.chunk.mjs";import"./index-CWc2CWr8.chunk.mjs";import"./dav-Co9y-hkg-B3N6wqAs.chunk.mjs";import"./_plugin-vue2_normalizer--qmvqNVe-CFuvccDx.chunk.mjs";import"./EditorOutline-BEhkI_yx.chunk.mjs";import"./MediaHandler.provider-BQgMXB6j.chunk.mjs";import"./logger-Csk1_XRx.chunk.mjs";import"./Wrapper-Bc9G3Aw9.chunk.mjs";import"./NcDialog-I_9fyJVt-DfcEDcKK.chunk.mjs";const h={name:"SessionList",components:{AvatarWrapper:c,NcPopover:n,NcCheckboxRadioSwitch:o},props:{sessions:{type:Object,default:()=>({})}},data(){return{myName:"",isFullWidth:u("text","is_full_width_editor",!1)}},computed:{label(){return t("text","Active people")},participantsPopover(){return this.currentSession?.guestName?this.participantsWithoutCurrent:this.participants},participantsWithoutCurrent(){return this.participants.filter(s=>!s.isCurrent)},participants(){return Object.values(this.sessions).filter(s=>s.lastContact>Date.now()/1e3-m&&(s.userId!==null||s.guestName!==null)).sort((s,e)=>s.lastContact<e.lastContact)},currentSession(){return Object.values(this.sessions).find(s=>s.isCurrent)},avatarStyle(){return s=>({opacity:s.lastContact>Date.now()/1e3-d?1:.5})},sessionsVisible(){return this.participantsWithoutCurrent.slice(0,3)}},methods:{onWidthToggle(s){this.isFullWidth=s,this.$emit("editor-width-change",s?"100%":"80ch"),l.post(p("/apps/text/settings"),{key:"is_full_width_editor",value:s?"1":"0"})}}};var v=function(){var s=this,e=s._self._c;return e("NcPopover",{staticClass:"session-list",attrs:{placement:"bottom"},scopedSlots:s._u([{key:"trigger",fn:function({attrs:i}){return[e("div",[e("button",s._b({staticClass:"avatar-list",attrs:{title:s.label,"aria-label":s.label}},"button",i,!1),[e("div",{staticClass:"avatardiv icon-group"}),s._l(s.sessionsVisible,function(r){return e("AvatarWrapper",{key:r.id,attrs:{session:r,size:30}})})],2)])]}},{key:"default",fn:function(){return[e("div",{staticClass:"session-menu"},[s._t("lastSaved"),e("ul",[s._t("default"),s._l(s.participantsPopover,function(i){return e("li",{key:i.id,style:s.avatarStyle(i)},[e("AvatarWrapper",{attrs:{session:i,size:36}}),e("span",{staticClass:"session-label"},[s._v(" "+s._s(i.userId?i.displayName:i.guestName?i.guestName:s.t("text","Guest"))+" ")]),i.userId===null?e("span",{staticClass:"guest-label"},[s._v("("+s._s(s.t("text","guest"))+")")]):s._e()],1)}),e("li",[e("NcCheckboxRadioSwitch",{attrs:{checked:s.isFullWidth},on:{"update:checked":s.onWidthToggle}},[s._v(" "+s._s(s.t("text","Full width editor"))+" ")])],1)],2)],2)]},proxy:!0}],null,!0)})},f=[],_=a(h,v,f,!1,null,"68cef651");const D=_.exports;export{D as default};
//# sourceMappingURL=SessionList-DVcp7DaJ.chunk.mjs.map
