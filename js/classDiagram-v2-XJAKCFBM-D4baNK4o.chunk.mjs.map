{"version":3,"file":"classDiagram-v2-XJAKCFBM-D4baNK4o.chunk.mjs","sources":["../node_modules/mermaid/dist/chunks/mermaid.core/classDiagram-v2-XJAKCFBM.mjs"],"sourcesContent":["import {\n  clear as clear2,\n  insertEdge,\n  insertEdgeLabel,\n  markers_default,\n  positionEdgeLabel\n} from \"./chunk-D7TMHCYL.mjs\";\nimport {\n  classDb_default,\n  classDiagram_default,\n  styles_default\n} from \"./chunk-BAVOGKFW.mjs\";\nimport {\n  clear,\n  createLabel_default,\n  insertNode,\n  intersect_rect_default,\n  positionNode,\n  setNodeElem,\n  updateNodeBounds\n} from \"./chunk-DGPT5PPI.mjs\";\nimport {\n  getSubGraphTitleMargins\n} from \"./chunk-23ATMZXV.mjs\";\nimport {\n  createText\n} from \"./chunk-RAVNKOQV.mjs\";\nimport {\n  getEdgeId,\n  getStylesFromArray,\n  interpolateToCurve,\n  utils_default\n} from \"./chunk-2EDTWDYI.mjs\";\nimport {\n  __name,\n  common_default,\n  evaluate,\n  getConfig2 as getConfig,\n  log,\n  setupGraphViewbox\n} from \"./chunk-IIKMQLIC.mjs\";\n\n// src/diagrams/class/classRenderer-v2.ts\nimport { select as select2, curveLinear } from \"d3\";\nimport * as graphlib2 from \"dagre-d3-es/src/graphlib/index.js\";\n\n// src/dagre-wrapper/index.js\nimport { layout as dagreLayout } from \"dagre-d3-es/src/dagre/index.js\";\nimport * as graphlibJson2 from \"dagre-d3-es/src/graphlib/json.js\";\n\n// src/dagre-wrapper/mermaid-graphlib.js\nimport * as graphlibJson from \"dagre-d3-es/src/graphlib/json.js\";\nimport * as graphlib from \"dagre-d3-es/src/graphlib/index.js\";\nvar clusterDb = {};\nvar descendants = {};\nvar parents = {};\nvar clear3 = /* @__PURE__ */ __name(() => {\n  descendants = {};\n  parents = {};\n  clusterDb = {};\n}, \"clear\");\nvar isDescendant = /* @__PURE__ */ __name((id, ancestorId) => {\n  log.trace(\"In isDescendant\", ancestorId, \" \", id, \" = \", descendants[ancestorId].includes(id));\n  if (descendants[ancestorId].includes(id)) {\n    return true;\n  }\n  return false;\n}, \"isDescendant\");\nvar edgeInCluster = /* @__PURE__ */ __name((edge, clusterId) => {\n  log.info(\"Descendants of \", clusterId, \" is \", descendants[clusterId]);\n  log.info(\"Edge is \", edge);\n  if (edge.v === clusterId) {\n    return false;\n  }\n  if (edge.w === clusterId) {\n    return false;\n  }\n  if (!descendants[clusterId]) {\n    log.debug(\"Tilt, \", clusterId, \",not in descendants\");\n    return false;\n  }\n  return descendants[clusterId].includes(edge.v) || isDescendant(edge.v, clusterId) || isDescendant(edge.w, clusterId) || descendants[clusterId].includes(edge.w);\n}, \"edgeInCluster\");\nvar copy = /* @__PURE__ */ __name((clusterId, graph, newGraph, rootId) => {\n  log.warn(\n    \"Copying children of \",\n    clusterId,\n    \"root\",\n    rootId,\n    \"data\",\n    graph.node(clusterId),\n    rootId\n  );\n  const nodes = graph.children(clusterId) || [];\n  if (clusterId !== rootId) {\n    nodes.push(clusterId);\n  }\n  log.warn(\"Copying (nodes) clusterId\", clusterId, \"nodes\", nodes);\n  nodes.forEach((node) => {\n    if (graph.children(node).length > 0) {\n      copy(node, graph, newGraph, rootId);\n    } else {\n      const data = graph.node(node);\n      log.info(\"cp \", node, \" to \", rootId, \" with parent \", clusterId);\n      newGraph.setNode(node, data);\n      if (rootId !== graph.parent(node)) {\n        log.warn(\"Setting parent\", node, graph.parent(node));\n        newGraph.setParent(node, graph.parent(node));\n      }\n      if (clusterId !== rootId && node !== clusterId) {\n        log.debug(\"Setting parent\", node, clusterId);\n        newGraph.setParent(node, clusterId);\n      } else {\n        log.info(\"In copy \", clusterId, \"root\", rootId, \"data\", graph.node(clusterId), rootId);\n        log.debug(\n          \"Not Setting parent for node=\",\n          node,\n          \"cluster!==rootId\",\n          clusterId !== rootId,\n          \"node!==clusterId\",\n          node !== clusterId\n        );\n      }\n      const edges = graph.edges(node);\n      log.debug(\"Copying Edges\", edges);\n      edges.forEach((edge) => {\n        log.info(\"Edge\", edge);\n        const data2 = graph.edge(edge.v, edge.w, edge.name);\n        log.info(\"Edge data\", data2, rootId);\n        try {\n          if (edgeInCluster(edge, rootId)) {\n            log.info(\"Copying as \", edge.v, edge.w, data2, edge.name);\n            newGraph.setEdge(edge.v, edge.w, data2, edge.name);\n            log.info(\"newGraph edges \", newGraph.edges(), newGraph.edge(newGraph.edges()[0]));\n          } else {\n            log.info(\n              \"Skipping copy of edge \",\n              edge.v,\n              \"-->\",\n              edge.w,\n              \" rootId: \",\n              rootId,\n              \" clusterId:\",\n              clusterId\n            );\n          }\n        } catch (e) {\n          log.error(e);\n        }\n      });\n    }\n    log.debug(\"Removing node\", node);\n    graph.removeNode(node);\n  });\n}, \"copy\");\nvar extractDescendants = /* @__PURE__ */ __name((id, graph) => {\n  const children = graph.children(id);\n  let res = [...children];\n  for (const child of children) {\n    parents[child] = id;\n    res = [...res, ...extractDescendants(child, graph)];\n  }\n  return res;\n}, \"extractDescendants\");\nvar findNonClusterChild = /* @__PURE__ */ __name((id, graph) => {\n  log.trace(\"Searching\", id);\n  const children = graph.children(id);\n  log.trace(\"Searching children of id \", id, children);\n  if (children.length < 1) {\n    log.trace(\"This is a valid node\", id);\n    return id;\n  }\n  for (const child of children) {\n    const _id = findNonClusterChild(child, graph);\n    if (_id) {\n      log.trace(\"Found replacement for\", id, \" => \", _id);\n      return _id;\n    }\n  }\n}, \"findNonClusterChild\");\nvar getAnchorId = /* @__PURE__ */ __name((id) => {\n  if (!clusterDb[id]) {\n    return id;\n  }\n  if (!clusterDb[id].externalConnections) {\n    return id;\n  }\n  if (clusterDb[id]) {\n    return clusterDb[id].id;\n  }\n  return id;\n}, \"getAnchorId\");\nvar adjustClustersAndEdges = /* @__PURE__ */ __name((graph, depth) => {\n  if (!graph || depth > 10) {\n    log.debug(\"Opting out, no graph \");\n    return;\n  } else {\n    log.debug(\"Opting in, graph \");\n  }\n  graph.nodes().forEach(function(id) {\n    const children = graph.children(id);\n    if (children.length > 0) {\n      log.warn(\n        \"Cluster identified\",\n        id,\n        \" Replacement id in edges: \",\n        findNonClusterChild(id, graph)\n      );\n      descendants[id] = extractDescendants(id, graph);\n      clusterDb[id] = { id: findNonClusterChild(id, graph), clusterData: graph.node(id) };\n    }\n  });\n  graph.nodes().forEach(function(id) {\n    const children = graph.children(id);\n    const edges = graph.edges();\n    if (children.length > 0) {\n      log.debug(\"Cluster identified\", id, descendants);\n      edges.forEach((edge) => {\n        if (edge.v !== id && edge.w !== id) {\n          const d1 = isDescendant(edge.v, id);\n          const d2 = isDescendant(edge.w, id);\n          if (d1 ^ d2) {\n            log.warn(\"Edge: \", edge, \" leaves cluster \", id);\n            log.warn(\"Descendants of XXX \", id, \": \", descendants[id]);\n            clusterDb[id].externalConnections = true;\n          }\n        }\n      });\n    } else {\n      log.debug(\"Not a cluster \", id, descendants);\n    }\n  });\n  for (let id of Object.keys(clusterDb)) {\n    const nonClusterChild = clusterDb[id].id;\n    const parent = graph.parent(nonClusterChild);\n    if (parent !== id && clusterDb[parent] && !clusterDb[parent].externalConnections) {\n      clusterDb[id].id = parent;\n    }\n  }\n  graph.edges().forEach(function(e) {\n    const edge = graph.edge(e);\n    log.warn(\"Edge \" + e.v + \" -> \" + e.w + \": \" + JSON.stringify(e));\n    log.warn(\"Edge \" + e.v + \" -> \" + e.w + \": \" + JSON.stringify(graph.edge(e)));\n    let v = e.v;\n    let w = e.w;\n    log.warn(\n      \"Fix XXX\",\n      clusterDb,\n      \"ids:\",\n      e.v,\n      e.w,\n      \"Translating: \",\n      clusterDb[e.v],\n      \" --- \",\n      clusterDb[e.w]\n    );\n    if (clusterDb[e.v] && clusterDb[e.w] && clusterDb[e.v] === clusterDb[e.w]) {\n      log.warn(\"Fixing and trixing link to self - removing XXX\", e.v, e.w, e.name);\n      log.warn(\"Fixing and trixing - removing XXX\", e.v, e.w, e.name);\n      v = getAnchorId(e.v);\n      w = getAnchorId(e.w);\n      graph.removeEdge(e.v, e.w, e.name);\n      const specialId = e.w + \"---\" + e.v;\n      graph.setNode(specialId, {\n        domId: specialId,\n        id: specialId,\n        labelStyle: \"\",\n        labelText: edge.label,\n        padding: 0,\n        shape: \"labelRect\",\n        style: \"\"\n      });\n      const edge1 = structuredClone(edge);\n      const edge2 = structuredClone(edge);\n      edge1.label = \"\";\n      edge1.arrowTypeEnd = \"none\";\n      edge2.label = \"\";\n      edge1.fromCluster = e.v;\n      edge2.toCluster = e.v;\n      graph.setEdge(v, specialId, edge1, e.name + \"-cyclic-special\");\n      graph.setEdge(specialId, w, edge2, e.name + \"-cyclic-special\");\n    } else if (clusterDb[e.v] || clusterDb[e.w]) {\n      log.warn(\"Fixing and trixing - removing XXX\", e.v, e.w, e.name);\n      v = getAnchorId(e.v);\n      w = getAnchorId(e.w);\n      graph.removeEdge(e.v, e.w, e.name);\n      if (v !== e.v) {\n        const parent = graph.parent(v);\n        clusterDb[parent].externalConnections = true;\n        edge.fromCluster = e.v;\n      }\n      if (w !== e.w) {\n        const parent = graph.parent(w);\n        clusterDb[parent].externalConnections = true;\n        edge.toCluster = e.w;\n      }\n      log.warn(\"Fix Replacing with XXX\", v, w, e.name);\n      graph.setEdge(v, w, edge, e.name);\n    }\n  });\n  log.warn(\"Adjusted Graph\", graphlibJson.write(graph));\n  extractor(graph, 0);\n  log.trace(clusterDb);\n}, \"adjustClustersAndEdges\");\nvar extractor = /* @__PURE__ */ __name((graph, depth) => {\n  log.warn(\"extractor - \", depth, graphlibJson.write(graph), graph.children(\"D\"));\n  if (depth > 10) {\n    log.error(\"Bailing out\");\n    return;\n  }\n  let nodes = graph.nodes();\n  let hasChildren = false;\n  for (const node of nodes) {\n    const children = graph.children(node);\n    hasChildren = hasChildren || children.length > 0;\n  }\n  if (!hasChildren) {\n    log.debug(\"Done, no node has children\", graph.nodes());\n    return;\n  }\n  log.debug(\"Nodes = \", nodes, depth);\n  for (const node of nodes) {\n    log.debug(\n      \"Extracting node\",\n      node,\n      clusterDb,\n      clusterDb[node] && !clusterDb[node].externalConnections,\n      !graph.parent(node),\n      graph.node(node),\n      graph.children(\"D\"),\n      \" Depth \",\n      depth\n    );\n    if (!clusterDb[node]) {\n      log.debug(\"Not a cluster\", node, depth);\n    } else if (!clusterDb[node].externalConnections && // !graph.parent(node) &&\n    graph.children(node) && graph.children(node).length > 0) {\n      log.warn(\n        \"Cluster without external connections, without a parent and with children\",\n        node,\n        depth\n      );\n      const graphSettings = graph.graph();\n      let dir = graphSettings.rankdir === \"TB\" ? \"LR\" : \"TB\";\n      if (clusterDb[node]?.clusterData?.dir) {\n        dir = clusterDb[node].clusterData.dir;\n        log.warn(\"Fixing dir\", clusterDb[node].clusterData.dir, dir);\n      }\n      const clusterGraph = new graphlib.Graph({\n        multigraph: true,\n        compound: true\n      }).setGraph({\n        rankdir: dir,\n        // Todo: set proper spacing\n        nodesep: 50,\n        ranksep: 50,\n        marginx: 8,\n        marginy: 8\n      }).setDefaultEdgeLabel(function() {\n        return {};\n      });\n      log.warn(\"Old graph before copy\", graphlibJson.write(graph));\n      copy(node, graph, clusterGraph, node);\n      graph.setNode(node, {\n        clusterNode: true,\n        id: node,\n        clusterData: clusterDb[node].clusterData,\n        labelText: clusterDb[node].labelText,\n        graph: clusterGraph\n      });\n      log.warn(\"New graph after copy node: (\", node, \")\", graphlibJson.write(clusterGraph));\n      log.debug(\"Old graph after copy\", graphlibJson.write(graph));\n    } else {\n      log.warn(\n        \"Cluster ** \",\n        node,\n        \" **not meeting the criteria !externalConnections:\",\n        !clusterDb[node].externalConnections,\n        \" no parent: \",\n        !graph.parent(node),\n        \" children \",\n        graph.children(node) && graph.children(node).length > 0,\n        graph.children(\"D\"),\n        depth\n      );\n      log.debug(clusterDb);\n    }\n  }\n  nodes = graph.nodes();\n  log.warn(\"New list of nodes\", nodes);\n  for (const node of nodes) {\n    const data = graph.node(node);\n    log.warn(\" Now next level\", node, data);\n    if (data.clusterNode) {\n      extractor(data.graph, depth + 1);\n    }\n  }\n}, \"extractor\");\nvar sorter = /* @__PURE__ */ __name((graph, nodes) => {\n  if (nodes.length === 0) {\n    return [];\n  }\n  let result = Object.assign(nodes);\n  nodes.forEach((node) => {\n    const children = graph.children(node);\n    const sorted = sorter(graph, children);\n    result = [...result, ...sorted];\n  });\n  return result;\n}, \"sorter\");\nvar sortNodesByHierarchy = /* @__PURE__ */ __name((graph) => sorter(graph, graph.children()), \"sortNodesByHierarchy\");\n\n// src/dagre-wrapper/clusters.js\nimport { select } from \"d3\";\nvar rect = /* @__PURE__ */ __name((parent, node) => {\n  log.info(\"Creating subgraph rect for \", node.id, node);\n  const siteConfig = getConfig();\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"cluster\" + (node.class ? \" \" + node.class : \"\")).attr(\"id\", node.id);\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  const useHtmlLabels = evaluate(siteConfig.flowchart.htmlLabels);\n  const label = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label\");\n  const text = node.labelType === \"markdown\" ? createText(label, node.labelText, { style: node.labelStyle, useHtmlLabels }, siteConfig) : label.node().appendChild(createLabel_default(node.labelText, node.labelStyle, void 0, true));\n  let bbox = text.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text.children[0];\n    const dv = select(text);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n  const width = node.width <= bbox.width + padding ? bbox.width + padding : node.width;\n  if (node.width <= bbox.width + padding) {\n    node.diff = (bbox.width - node.width) / 2 - node.padding / 2;\n  } else {\n    node.diff = -node.padding / 2;\n  }\n  log.trace(\"Data \", node, JSON.stringify(node));\n  rect2.attr(\"style\", node.style).attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", node.x - width / 2).attr(\"y\", node.y - node.height / 2 - halfPadding).attr(\"width\", width).attr(\"height\", node.height + padding);\n  const { subGraphTitleTopMargin } = getSubGraphTitleMargins(siteConfig);\n  if (useHtmlLabels) {\n    label.attr(\n      \"transform\",\n      // This puts the label on top of the box instead of inside it\n      `translate(${node.x - bbox.width / 2}, ${node.y - node.height / 2 + subGraphTitleTopMargin})`\n    );\n  } else {\n    label.attr(\n      \"transform\",\n      // This puts the label on top of the box instead of inside it\n      `translate(${node.x}, ${node.y - node.height / 2 + subGraphTitleTopMargin})`\n    );\n  }\n  const rectBox = rect2.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return shapeSvg;\n}, \"rect\");\nvar noteGroup = /* @__PURE__ */ __name((parent, node) => {\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"note-cluster\").attr(\"id\", node.id);\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n  rect2.attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", node.x - node.width / 2 - halfPadding).attr(\"y\", node.y - node.height / 2 - halfPadding).attr(\"width\", node.width + padding).attr(\"height\", node.height + padding).attr(\"fill\", \"none\");\n  const rectBox = rect2.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return shapeSvg;\n}, \"noteGroup\");\nvar roundedWithTitle = /* @__PURE__ */ __name((parent, node) => {\n  const siteConfig = getConfig();\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", node.classes).attr(\"id\", node.id);\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  const label = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label\");\n  const innerRect = shapeSvg.append(\"rect\");\n  const text = label.node().appendChild(createLabel_default(node.labelText, node.labelStyle, void 0, true));\n  let bbox = text.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text.children[0];\n    const dv = select(text);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  bbox = text.getBBox();\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n  const width = node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (bbox.width + node.padding * 0 - node.width) / 2;\n  } else {\n    node.diff = -node.padding / 2;\n  }\n  rect2.attr(\"class\", \"outer\").attr(\"x\", node.x - width / 2 - halfPadding).attr(\"y\", node.y - node.height / 2 - halfPadding).attr(\"width\", width + padding).attr(\"height\", node.height + padding);\n  innerRect.attr(\"class\", \"inner\").attr(\"x\", node.x - width / 2 - halfPadding).attr(\"y\", node.y - node.height / 2 - halfPadding + bbox.height - 1).attr(\"width\", width + padding).attr(\"height\", node.height + padding - bbox.height - 3);\n  const { subGraphTitleTopMargin } = getSubGraphTitleMargins(siteConfig);\n  label.attr(\n    \"transform\",\n    `translate(${node.x - bbox.width / 2}, ${node.y - node.height / 2 - node.padding / 3 + (evaluate(siteConfig.flowchart.htmlLabels) ? 5 : 3) + subGraphTitleTopMargin})`\n  );\n  const rectBox = rect2.node().getBBox();\n  node.height = rectBox.height;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return shapeSvg;\n}, \"roundedWithTitle\");\nvar divider = /* @__PURE__ */ __name((parent, node) => {\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", node.classes).attr(\"id\", node.id);\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n  rect2.attr(\"class\", \"divider\").attr(\"x\", node.x - node.width / 2 - halfPadding).attr(\"y\", node.y - node.height / 2).attr(\"width\", node.width + padding).attr(\"height\", node.height + padding);\n  const rectBox = rect2.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.diff = -node.padding / 2;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return shapeSvg;\n}, \"divider\");\nvar shapes = { rect, roundedWithTitle, noteGroup, divider };\nvar clusterElems = {};\nvar insertCluster = /* @__PURE__ */ __name((elem, node) => {\n  log.trace(\"Inserting cluster\");\n  const shape = node.shape || \"rect\";\n  clusterElems[node.id] = shapes[shape](elem, node);\n}, \"insertCluster\");\nvar clear4 = /* @__PURE__ */ __name(() => {\n  clusterElems = {};\n}, \"clear\");\n\n// src/dagre-wrapper/index.js\nvar recursiveRender = /* @__PURE__ */ __name(async (_elem, graph, diagramType, id, parentCluster, siteConfig) => {\n  log.info(\"Graph in recursive render: XXX\", graphlibJson2.write(graph), parentCluster);\n  const dir = graph.graph().rankdir;\n  log.trace(\"Dir in recursive render - dir:\", dir);\n  const elem = _elem.insert(\"g\").attr(\"class\", \"root\");\n  if (!graph.nodes()) {\n    log.info(\"No nodes found for\", graph);\n  } else {\n    log.info(\"Recursive render XXX\", graph.nodes());\n  }\n  if (graph.edges().length > 0) {\n    log.trace(\"Recursive edges\", graph.edge(graph.edges()[0]));\n  }\n  const clusters = elem.insert(\"g\").attr(\"class\", \"clusters\");\n  const edgePaths = elem.insert(\"g\").attr(\"class\", \"edgePaths\");\n  const edgeLabels = elem.insert(\"g\").attr(\"class\", \"edgeLabels\");\n  const nodes = elem.insert(\"g\").attr(\"class\", \"nodes\");\n  await Promise.all(\n    graph.nodes().map(async function(v) {\n      const node = graph.node(v);\n      if (parentCluster !== void 0) {\n        const data = JSON.parse(JSON.stringify(parentCluster.clusterData));\n        log.info(\"Setting data for cluster XXX (\", v, \") \", data, parentCluster);\n        graph.setNode(parentCluster.id, data);\n        if (!graph.parent(v)) {\n          log.trace(\"Setting parent\", v, parentCluster.id);\n          graph.setParent(v, parentCluster.id, data);\n        }\n      }\n      log.info(\"(Insert) Node XXX\" + v + \": \" + JSON.stringify(graph.node(v)));\n      if (node?.clusterNode) {\n        log.info(\"Cluster identified\", v, node.width, graph.node(v));\n        const { ranksep, nodesep } = graph.graph();\n        node.graph.setGraph({\n          ...node.graph.graph(),\n          ranksep,\n          nodesep\n        });\n        const o = await recursiveRender(\n          nodes,\n          node.graph,\n          diagramType,\n          id,\n          graph.node(v),\n          siteConfig\n        );\n        const newEl = o.elem;\n        updateNodeBounds(node, newEl);\n        node.diff = o.diff || 0;\n        log.info(\"Node bounds (abc123)\", v, node, node.width, node.x, node.y);\n        setNodeElem(newEl, node);\n        log.warn(\"Recursive render complete \", newEl, node);\n      } else {\n        if (graph.children(v).length > 0) {\n          log.info(\"Cluster - the non recursive path XXX\", v, node.id, node, graph);\n          log.info(findNonClusterChild(node.id, graph));\n          clusterDb[node.id] = { id: findNonClusterChild(node.id, graph), node };\n        } else {\n          log.info(\"Node - the non recursive path\", v, node.id, node);\n          await insertNode(nodes, graph.node(v), dir);\n        }\n      }\n    })\n  );\n  graph.edges().forEach(async function(e) {\n    const edge = graph.edge(e.v, e.w, e.name);\n    log.info(\"Edge \" + e.v + \" -> \" + e.w + \": \" + JSON.stringify(e));\n    log.info(\"Edge \" + e.v + \" -> \" + e.w + \": \", e, \" \", JSON.stringify(graph.edge(e)));\n    log.info(\"Fix\", clusterDb, \"ids:\", e.v, e.w, \"Translating: \", clusterDb[e.v], clusterDb[e.w]);\n    await insertEdgeLabel(edgeLabels, edge);\n  });\n  graph.edges().forEach(function(e) {\n    log.info(\"Edge \" + e.v + \" -> \" + e.w + \": \" + JSON.stringify(e));\n  });\n  log.info(\"Graph before layout:\", JSON.stringify(graphlibJson2.write(graph)));\n  log.info(\"#############################################\");\n  log.info(\"###                Layout                 ###\");\n  log.info(\"#############################################\");\n  log.info(graph);\n  dagreLayout(graph);\n  log.info(\"Graph after layout:\", JSON.stringify(graphlibJson2.write(graph)));\n  let diff = 0;\n  const { subGraphTitleTotalMargin } = getSubGraphTitleMargins(siteConfig);\n  sortNodesByHierarchy(graph).forEach(function(v) {\n    const node = graph.node(v);\n    log.info(\"Position \" + v + \": \" + JSON.stringify(graph.node(v)));\n    log.info(\n      \"Position \" + v + \": (\" + node.x,\n      \",\" + node.y,\n      \") width: \",\n      node.width,\n      \" height: \",\n      node.height\n    );\n    if (node?.clusterNode) {\n      node.y += subGraphTitleTotalMargin;\n      positionNode(node);\n    } else {\n      if (graph.children(v).length > 0) {\n        node.height += subGraphTitleTotalMargin;\n        insertCluster(clusters, node);\n        clusterDb[node.id].node = node;\n      } else {\n        node.y += subGraphTitleTotalMargin / 2;\n        positionNode(node);\n      }\n    }\n  });\n  graph.edges().forEach(function(e) {\n    const edge = graph.edge(e);\n    log.info(\"Edge \" + e.v + \" -> \" + e.w + \": \" + JSON.stringify(edge), edge);\n    edge.points.forEach((point) => point.y += subGraphTitleTotalMargin / 2);\n    const paths = insertEdge(edgePaths, e, edge, clusterDb, diagramType, graph, id);\n    positionEdgeLabel(edge, paths);\n  });\n  graph.nodes().forEach(function(v) {\n    const n = graph.node(v);\n    log.info(v, n.type, n.diff);\n    if (n.type === \"group\") {\n      diff = n.diff;\n    }\n  });\n  return { elem, diff };\n}, \"recursiveRender\");\nvar render = /* @__PURE__ */ __name(async (elem, graph, markers, diagramType, id) => {\n  markers_default(elem, markers, diagramType, id);\n  clear();\n  clear2();\n  clear4();\n  clear3();\n  log.warn(\"Graph at first:\", JSON.stringify(graphlibJson2.write(graph)));\n  adjustClustersAndEdges(graph);\n  log.warn(\"Graph after:\", JSON.stringify(graphlibJson2.write(graph)));\n  const siteConfig = getConfig();\n  await recursiveRender(elem, graph, diagramType, id, void 0, siteConfig);\n}, \"render\");\n\n// src/diagrams/class/classRenderer-v2.ts\nvar sanitizeText = /* @__PURE__ */ __name((txt) => common_default.sanitizeText(txt, getConfig()), \"sanitizeText\");\nvar conf = {\n  dividerMargin: 10,\n  padding: 5,\n  textHeight: 10,\n  curve: void 0\n};\nvar addNamespaces = /* @__PURE__ */ __name(function(namespaces, g, _id, diagObj) {\n  log.info(\"keys:\", [...namespaces.keys()]);\n  log.info(namespaces);\n  namespaces.forEach(function(vertex) {\n    const shape = \"rect\";\n    const node = {\n      shape,\n      id: vertex.id,\n      domId: vertex.domId,\n      labelText: sanitizeText(vertex.id),\n      labelStyle: \"\",\n      style: \"fill: none; stroke: black\",\n      // TODO V10: Flowchart ? Keeping flowchart for backwards compatibility. Remove in next major release\n      padding: getConfig().flowchart?.padding ?? getConfig().class?.padding\n    };\n    g.setNode(vertex.id, node);\n    addClasses(vertex.classes, g, _id, diagObj, vertex.id);\n    log.info(\"setNode\", node);\n  });\n}, \"addNamespaces\");\nvar addClasses = /* @__PURE__ */ __name(function(classes, g, _id, diagObj, parent) {\n  log.info(\"keys:\", [...classes.keys()]);\n  log.info(classes);\n  [...classes.values()].filter((vertex) => vertex.parent === parent).forEach(function(vertex) {\n    const cssClassStr = vertex.cssClasses.join(\" \");\n    const styles = getStylesFromArray(vertex.styles);\n    const vertexText = vertex.label ?? vertex.id;\n    const radius = 0;\n    const shape = \"class_box\";\n    const node = {\n      labelStyle: styles.labelStyle,\n      shape,\n      labelText: sanitizeText(vertexText),\n      classData: vertex,\n      rx: radius,\n      ry: radius,\n      class: cssClassStr,\n      style: styles.style,\n      id: vertex.id,\n      domId: vertex.domId,\n      tooltip: diagObj.db.getTooltip(vertex.id, parent) || \"\",\n      haveCallback: vertex.haveCallback,\n      link: vertex.link,\n      width: vertex.type === \"group\" ? 500 : void 0,\n      type: vertex.type,\n      // TODO V10: Flowchart ? Keeping flowchart for backwards compatibility. Remove in next major release\n      padding: getConfig().flowchart?.padding ?? getConfig().class?.padding\n    };\n    g.setNode(vertex.id, node);\n    if (parent) {\n      g.setParent(vertex.id, parent);\n    }\n    log.info(\"setNode\", node);\n  });\n}, \"addClasses\");\nvar addNotes = /* @__PURE__ */ __name(function(notes, g, startEdgeId, classes) {\n  log.info(notes);\n  notes.forEach(function(note, i) {\n    const vertex = note;\n    const cssNoteStr = \"\";\n    const styles = { labelStyle: \"\", style: \"\" };\n    const vertexText = vertex.text;\n    const radius = 0;\n    const shape = \"note\";\n    const node = {\n      labelStyle: styles.labelStyle,\n      shape,\n      labelText: sanitizeText(vertexText),\n      noteData: vertex,\n      rx: radius,\n      ry: radius,\n      class: cssNoteStr,\n      style: styles.style,\n      id: vertex.id,\n      domId: vertex.id,\n      tooltip: \"\",\n      type: \"note\",\n      // TODO V10: Flowchart ? Keeping flowchart for backwards compatibility. Remove in next major release\n      padding: getConfig().flowchart?.padding ?? getConfig().class?.padding\n    };\n    g.setNode(vertex.id, node);\n    log.info(\"setNode\", node);\n    if (!vertex.class || !classes.has(vertex.class)) {\n      return;\n    }\n    const edgeId = startEdgeId + i;\n    const edgeData = {\n      id: `edgeNote${edgeId}`,\n      //Set relationship style and line type\n      classes: \"relation\",\n      pattern: \"dotted\",\n      // Set link type for rendering\n      arrowhead: \"none\",\n      //Set edge extra labels\n      startLabelRight: \"\",\n      endLabelLeft: \"\",\n      //Set relation arrow types\n      arrowTypeStart: \"none\",\n      arrowTypeEnd: \"none\",\n      style: \"fill:none\",\n      labelStyle: \"\",\n      curve: interpolateToCurve(conf.curve, curveLinear)\n    };\n    g.setEdge(vertex.id, vertex.class, edgeData, edgeId);\n  });\n}, \"addNotes\");\nvar addRelations = /* @__PURE__ */ __name(function(relations, g) {\n  const conf2 = getConfig().flowchart;\n  let cnt = 0;\n  relations.forEach(function(edge) {\n    cnt++;\n    const edgeData = {\n      //Set relationship style and line type\n      classes: \"relation\",\n      pattern: edge.relation.lineType == 1 ? \"dashed\" : \"solid\",\n      id: getEdgeId(edge.id1, edge.id2, {\n        prefix: \"id\",\n        counter: cnt\n      }),\n      // Set link type for rendering\n      arrowhead: edge.type === \"arrow_open\" ? \"none\" : \"normal\",\n      //Set edge extra labels\n      startLabelRight: edge.relationTitle1 === \"none\" ? \"\" : edge.relationTitle1,\n      endLabelLeft: edge.relationTitle2 === \"none\" ? \"\" : edge.relationTitle2,\n      //Set relation arrow types\n      arrowTypeStart: getArrowMarker(edge.relation.type1),\n      arrowTypeEnd: getArrowMarker(edge.relation.type2),\n      style: \"fill:none\",\n      labelStyle: \"\",\n      curve: interpolateToCurve(conf2?.curve, curveLinear)\n    };\n    log.info(edgeData, edge);\n    if (edge.style !== void 0) {\n      const styles = getStylesFromArray(edge.style);\n      edgeData.style = styles.style;\n      edgeData.labelStyle = styles.labelStyle;\n    }\n    edge.text = edge.title;\n    if (edge.text === void 0) {\n      if (edge.style !== void 0) {\n        edgeData.arrowheadStyle = \"fill: #333\";\n      }\n    } else {\n      edgeData.arrowheadStyle = \"fill: #333\";\n      edgeData.labelpos = \"c\";\n      if (getConfig().flowchart?.htmlLabels ?? getConfig().htmlLabels) {\n        edgeData.labelType = \"html\";\n        edgeData.label = '<span class=\"edgeLabel\">' + edge.text + \"</span>\";\n      } else {\n        edgeData.labelType = \"text\";\n        edgeData.label = edge.text.replace(common_default.lineBreakRegex, \"\\n\");\n        if (edge.style === void 0) {\n          edgeData.style = edgeData.style || \"stroke: #333; stroke-width: 1.5px;fill:none\";\n        }\n        edgeData.labelStyle = edgeData.labelStyle.replace(\"color:\", \"fill:\");\n      }\n    }\n    g.setEdge(edge.id1, edge.id2, edgeData, cnt);\n  });\n}, \"addRelations\");\nvar setConf = /* @__PURE__ */ __name(function(cnf) {\n  conf = {\n    ...conf,\n    ...cnf\n  };\n}, \"setConf\");\nvar draw = /* @__PURE__ */ __name(async function(text, id, _version, diagObj) {\n  log.info(\"Drawing class - \", id);\n  const conf2 = getConfig().flowchart ?? getConfig().class;\n  const securityLevel = getConfig().securityLevel;\n  log.info(\"config:\", conf2);\n  const nodeSpacing = conf2?.nodeSpacing ?? 50;\n  const rankSpacing = conf2?.rankSpacing ?? 50;\n  const g = new graphlib2.Graph({\n    multigraph: true,\n    compound: true\n  }).setGraph({\n    rankdir: diagObj.db.getDirection(),\n    nodesep: nodeSpacing,\n    ranksep: rankSpacing,\n    marginx: 8,\n    marginy: 8\n  }).setDefaultEdgeLabel(function() {\n    return {};\n  });\n  const namespaces = diagObj.db.getNamespaces();\n  const classes = diagObj.db.getClasses();\n  const relations = diagObj.db.getRelations();\n  const notes = diagObj.db.getNotes();\n  log.info(relations);\n  addNamespaces(namespaces, g, id, diagObj);\n  addClasses(classes, g, id, diagObj);\n  addRelations(relations, g);\n  addNotes(notes, g, relations.length + 1, classes);\n  let sandboxElement;\n  if (securityLevel === \"sandbox\") {\n    sandboxElement = select2(\"#i\" + id);\n  }\n  const root = securityLevel === \"sandbox\" ? select2(sandboxElement.nodes()[0].contentDocument.body) : select2(\"body\");\n  const svg = root.select(`[id=\"${id}\"]`);\n  const element = root.select(\"#\" + id + \" g\");\n  await render(\n    element,\n    g,\n    [\"aggregation\", \"extension\", \"composition\", \"dependency\", \"lollipop\"],\n    \"classDiagram\",\n    id\n  );\n  utils_default.insertTitle(svg, \"classTitleText\", conf2?.titleTopMargin ?? 5, diagObj.db.getDiagramTitle());\n  setupGraphViewbox(g, svg, conf2?.diagramPadding, conf2?.useMaxWidth);\n  if (!conf2?.htmlLabels) {\n    const doc = securityLevel === \"sandbox\" ? sandboxElement.nodes()[0].contentDocument : document;\n    const labels = doc.querySelectorAll('[id=\"' + id + '\"] .edgeLabel .label');\n    for (const label of labels) {\n      const dim = label.getBBox();\n      const rect2 = doc.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n      rect2.setAttribute(\"rx\", 0);\n      rect2.setAttribute(\"ry\", 0);\n      rect2.setAttribute(\"width\", dim.width);\n      rect2.setAttribute(\"height\", dim.height);\n      label.insertBefore(rect2, label.firstChild);\n    }\n  }\n}, \"draw\");\nfunction getArrowMarker(type) {\n  let marker;\n  switch (type) {\n    case 0:\n      marker = \"aggregation\";\n      break;\n    case 1:\n      marker = \"extension\";\n      break;\n    case 2:\n      marker = \"composition\";\n      break;\n    case 3:\n      marker = \"dependency\";\n      break;\n    case 4:\n      marker = \"lollipop\";\n      break;\n    default:\n      marker = \"none\";\n  }\n  return marker;\n}\n__name(getArrowMarker, \"getArrowMarker\");\nvar classRenderer_v2_default = {\n  setConf,\n  draw\n};\n\n// src/diagrams/class/classDiagram-v2.ts\nvar diagram = {\n  parser: classDiagram_default,\n  db: classDb_default,\n  renderer: classRenderer_v2_default,\n  styles: styles_default,\n  init: /* @__PURE__ */ __name((cnf) => {\n    if (!cnf.class) {\n      cnf.class = {};\n    }\n    cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n    classDb_default.clear();\n  }, \"init\")\n};\nexport {\n  diagram\n};\n"],"names":["clusterDb","descendants","parents","clear3","__name","isDescendant","id","ancestorId","log","edgeInCluster","edge","clusterId","copy","graph","newGraph","rootId","nodes","node","data","edges","data2","e","extractDescendants","children","res","child","findNonClusterChild","_id","getAnchorId","adjustClustersAndEdges","depth","d1","d2","nonClusterChild","parent","v","w","specialId","edge1","edge2","graphlibJson.write","extractor","hasChildren","dir","clusterGraph","graphlib.Graph","sorter","result","sorted","sortNodesByHierarchy","rect","siteConfig","getConfig","shapeSvg","rect2","useHtmlLabels","evaluate","label","text","createText","createLabel_default","bbox","div","dv","select","padding","halfPadding","width","subGraphTitleTopMargin","getSubGraphTitleMargins","rectBox","point","intersect_rect_default","noteGroup","roundedWithTitle","innerRect","divider","shapes","clusterElems","insertCluster","elem","shape","clear4","recursiveRender","_elem","diagramType","parentCluster","graphlibJson2.write","clusters","edgePaths","edgeLabels","ranksep","nodesep","o","newEl","updateNodeBounds","setNodeElem","insertNode","insertEdgeLabel","dagreLayout","diff","subGraphTitleTotalMargin","positionNode","paths","insertEdge","positionEdgeLabel","n","render","markers","markers_default","clear","clear2","sanitizeText","txt","common_default","conf","addNamespaces","namespaces","g","diagObj","vertex","addClasses","classes","cssClassStr","styles","getStylesFromArray","vertexText","radius","addNotes","notes","startEdgeId","note","i","cssNoteStr","edgeId","edgeData","interpolateToCurve","curveLinear","addRelations","relations","conf2","cnt","getEdgeId","getArrowMarker","setConf","cnf","draw","_version","securityLevel","nodeSpacing","rankSpacing","graphlib2.Graph","sandboxElement","select2","root","svg","element","utils_default","setupGraphViewbox","doc","labels","dim","type","marker","classRenderer_v2_default","diagram","classDiagram_default","classDb_default","styles_default"],"mappings":"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","x_google_ignoreList":[0]}